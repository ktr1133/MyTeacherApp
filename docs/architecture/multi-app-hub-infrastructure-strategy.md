# å€‹äººé–‹ç™ºè€…å‘ã‘ ã‚·ãƒ³ãƒ—ãƒ«çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆè¦ä»¶ç¢ºå®šç‰ˆï¼‰

> **ğŸ“Œ Phaseå®Ÿè£…çŠ¶æ³**
> - âœ… **Phase 0.5å®Œäº†**: AWS Fargateæ§‹ç¯‰ï¼ˆ$164/æœˆã€~Â¥25,000ï¼‰- ECS, RDS, ElastiCache, S3, CloudFront
> - ğŸš§ **Phase 1å®Ÿè£…ä¸­**: Cognito JWTèªè¨¼ + Mobile APIï¼ˆ13 API Actionså®Œäº†ã€ãƒ†ã‚¹ãƒˆä½œæˆå®Œäº†ï¼‰
> - ğŸ“… **Phase 2-4**: å°†æ¥è¨ˆç”»ï¼ˆPortalç‹¬ç«‹åŒ–ã€ParentShareã€AI-Senseiï¼‰
> 
> Phase 1ã®å®Ÿè£…ã¯**ã‚µãƒ–ãƒ•ã‚§ãƒ¼ã‚º1.1-1.5**ã«åˆ†ã‹ã‚Œã¦ãŠã‚Šã€ç¾åœ¨ã¯Phase 1.5ï¼ˆãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ï¼‰æ®µéšã§ã™ã€‚

## ğŸ“‹ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã®è€ƒæ…®è¦ä»¶ï¼ˆä¿®æ­£ç‰ˆï¼‰

### 1. å€‹äººé–‹ç™ºè€…ã®åˆ¶ç´„æ¡ä»¶
- **é–‹ç™ºãƒªã‚½ãƒ¼ã‚¹**: ä¸€äººã§ã®é–‹ç™ºãƒ»é‹ç”¨ãƒ»ä¿å®ˆ
- **äºˆç®—åˆ¶ç´„**: è³‡æœ¬é‡‘ã‚¼ãƒ­ã€ã‚µãƒ©ãƒªãƒ¼ãƒãƒ³çµ¦æ–™ã‹ã‚‰ã®æ”¯æ‰•ã„
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼åŸºç›¤**: ç¾åœ¨ã‚¼ãƒ­ã€åˆæœŸæŠ•è³‡ãƒªã‚¹ã‚¯æœ€å°åŒ–ãŒå¿…é ˆ
- **æ™‚é–“åˆ¶ç´„**: æœ¬æ¥­ã¨ä¸¦è¡Œã€åŠ¹ç‡çš„ãªé–‹ç™ºãƒ»é‹ç”¨ãŒå¿…è¦
- **å®Ÿéš›ã®ã‚³ã‚¹ãƒˆ**: æœˆé¡$164 (~Â¥25,000) â† Phase 0.5ã§AWS Fargateæ§‹ç¯‰æ¸ˆã¿

### 2. æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿæ…‹

#### MyTeacher Webç‰ˆï¼ˆå®Œå…¨ç¨¼åƒä¸­ï¼‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Laravel 12
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: Action-Service-Repositoryãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ¬ã‚¹ï¼‰
- **ä¸»è¦æ©Ÿèƒ½**:
  - ã‚¿ã‚¹ã‚¯ç®¡ç†ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚¹ã‚¯ã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¿ã‚¹ã‚¯ã€æ‰¿èªãƒ•ãƒ­ãƒ¼ï¼‰
  - AIçµ±åˆï¼ˆOpenAI ã‚¿ã‚¹ã‚¯åˆ†è§£ã€Stable Diffusion ã‚¢ãƒã‚¿ãƒ¼ç”Ÿæˆï¼‰
  - ãƒˆãƒ¼ã‚¯ãƒ³ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ**Stripeæœªå®Ÿè£…**ã€ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ç®¡ç†ã®ã¿ç¨¼åƒï¼‰
  - ã‚¢ãƒã‚¿ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ï¼ˆAIç”Ÿæˆæ•™å¸«ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåˆ¥ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
  - ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ©Ÿèƒ½ï¼ˆCronå®Ÿè¡Œã€ç¥æ—¥å¯¾å¿œã€ãƒ©ãƒ³ãƒ€ãƒ å‰²å½“ï¼‰

#### ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆï¼ˆç¾åœ¨Laravelçµ±åˆã€å°†æ¥ç‹¬ç«‹äºˆå®šï¼‰
- **ç¾åœ¨ã®å®Ÿè£…**: Laravelå†…ã«å®Œå…¨å®Ÿè£…æ¸ˆã¿ï¼ˆ`/portal/*` ãƒ«ãƒ¼ãƒˆï¼‰
- **å°†æ¥ã®æ–¹é‡**: ç‹¬ç«‹ã—ãŸãƒãƒ–ã‚µã‚¤ãƒˆã¨ã—ã¦åˆ†é›¢
- **ç¾åœ¨ã®æ©Ÿèƒ½**:
  - FAQç®¡ç†ï¼ˆ`Faq`ãƒ¢ãƒ‡ãƒ«ã€ç®¡ç†ç”»é¢ã‚ã‚Šï¼‰
  - ãŠçŸ¥ã‚‰ã›ç®¡ç†ï¼ˆ`AppUpdate`ãƒ¢ãƒ‡ãƒ«ã€ç®¡ç†ç”»é¢ã‚ã‚Šï¼‰
  - ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹é€šçŸ¥ï¼ˆ`Maintenance`ãƒ¢ãƒ‡ãƒ«ã€ç®¡ç†ç”»é¢ã‚ã‚Šï¼‰
  - ãŠå•ã„åˆã‚ã›ï¼ˆ`ContactSubmission`ãƒ¢ãƒ‡ãƒ«ã€ç®¡ç†ç”»é¢ã‚ã‚Šï¼‰
  - ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ï¼ˆé™çš„ãƒšãƒ¼ã‚¸ï¼‰
- **è¿½åŠ äºˆå®šæ©Ÿèƒ½**:
  - é–‹ç™ºãƒ–ãƒ­ã‚°ï¼ˆé–‹ç™ºç§˜è©±ãƒ»æŠ€è¡“è¨˜äº‹ã€å…¬é–‹ï¼‰
- **ç”»é¢**: `resources/views/portal/` + `resources/views/admin/portal/`
- **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: 
  - åŸºæœ¬ã¯å…¬é–‹ï¼ˆæœªãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹å¯ï¼‰
  - ä¸€éƒ¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆã®å¯èƒ½æ€§ã‚ã‚Š

#### ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆ
- **é–‹ç™ºç’°å¢ƒ**: Docker Composeï¼ˆPostgreSQL 16 + Redis + MinIOï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: 
  - é–‹ç™º: MinIO
  - æœ¬ç•ª: S3ï¼ˆæƒ³å®šï¼‰
  - ç”¨é€”: ã‚¿ã‚¹ã‚¯ç”»åƒã€ã‚¢ãƒã‚¿ãƒ¼ç”»åƒ
- **å¯¾å¿œç’°å¢ƒ**: PCãƒ–ãƒ©ã‚¦ã‚¶ã€ã‚¹ãƒãƒ›ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œæ¸ˆã¿ï¼‰

#### å¤–éƒ¨APIé€£æºçŠ¶æ³
- âœ… **OpenAI API**: å®Ÿè£…æ¸ˆã¿ï¼ˆã‚¿ã‚¹ã‚¯åˆ†è§£ã€DALL-Eï¼‰
- âœ… **Replicate API**: å®Ÿè£…æ¸ˆã¿ï¼ˆStable Diffusionï¼‰
- âš ï¸ **Stripe API**: ç’°å¢ƒå¤‰æ•°è¨­å®šã‚ã‚Šã€æœªå®Ÿè£…
- âŒ **Firebase**: æœªå®Ÿè£…ï¼ˆç’°å¢ƒå¤‰æ•°è¨­å®šãªã—ï¼‰

### 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æœ›ãƒ»æ©Ÿèƒ½è¦ä»¶

#### MyTeacheræ‹¡å¼µ
- **ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª**: è¦ªä¸–ä»£å‘ã‘ã‚¹ãƒãƒ›ã‚¢ãƒ—ãƒª
- **PWAä¸è¦**: æ—¢å­˜WebãŒã‚¹ãƒãƒ›å¯¾å¿œæ¸ˆã¿ã€è¿½åŠ é–‹ç™ºä¸è¦

#### ãƒãƒ¼ã‚¿ãƒ«æ©Ÿèƒ½ï¼ˆå°†æ¥çš„ã«ç‹¬ç«‹ãƒãƒ–ã‚µã‚¤ãƒˆåŒ–ï¼‰
- **ç¾åœ¨**: MyTeacher Laravelå†…ã«çµ±åˆå®Ÿè£…
- **å°†æ¥**: ç‹¬ç«‹ã—ãŸãƒãƒ–ã‚µã‚¤ãƒˆã¨ã—ã¦åˆ†é›¢
- **å½¹å‰²**:
  - å„ã‚¢ãƒ—ãƒªï¼ˆMyTeacherãƒ»ParentShareãƒ»AI-Senseiï¼‰ã¸ã®ãƒªãƒ³ã‚¯æä¾›
  - FAQãƒ»ãŠçŸ¥ã‚‰ã›ãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹é€šçŸ¥ã®æ¨ªæ–­ç®¡ç†
  - ã‚¢ãƒ—ãƒªåˆ©ç”¨å‰ã®æƒ…å ±åé›†ï¼ˆãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸æ©Ÿèƒ½ï¼‰
  - å„ã‚¢ãƒ—ãƒªåˆ©ç”¨ä¸­ã®ãƒ˜ãƒ«ãƒ—ãƒ»ã‚µãƒãƒ¼ãƒˆ
  - è¤‡æ•°ã‚¢ãƒ—ãƒªã®æ¨ªæ–­çš„ãªæƒ…å ±ç¢ºèª
- **ã‚¢ã‚¯ã‚»ã‚¹**: åŸºæœ¬å…¬é–‹ã€ä¸€éƒ¨ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚ã‚Š

#### å°†æ¥ã‚¢ãƒ—ãƒªè¿½åŠ 
- **åˆ¥ãƒªãƒã‚¸ãƒˆãƒªå¯**: ãƒªãƒã‚¸ãƒˆãƒªè‚¥å¤§åŒ–ã«ã‚ˆã‚‹Pullå¤±æ•—ãƒªã‚¹ã‚¯å›é¿
- **ç‹¬ç«‹DB**: å„ã‚¢ãƒ—ãƒªå°‚ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆ
- **APIé€£æº**: MyTeacherã¨å°†æ¥ã‚¢ãƒ—ãƒªé–“ã®ãƒ‡ãƒ¼ã‚¿é€£æº

### 4. ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆã®å°†æ¥æ§‹æƒ³

#### ç‹¬ç«‹ãƒãƒ–ã‚µã‚¤ãƒˆã¨ã—ã¦ã®å½¹å‰²
- **ç‹¬ç«‹æ™‚æœŸ**: Phase 2ä»¥é™ï¼ˆParentShareé–‹ç™ºæ™‚ã¾ãŸã¯å‰ï¼‰- **æœªå®Ÿè£…**
- **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: Laravelæ–°è¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆMyTeacherã‹ã‚‰åˆ†é›¢ï¼‰
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: ç‹¬ç«‹ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆåˆ¥ãƒ‰ãƒ¡ã‚¤ãƒ³æƒ³å®šï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: ç‹¬ç«‹DBï¼ˆãƒãƒ¼ã‚¿ãƒ«å°‚ç”¨ï¼‰
- **èªè¨¼é€£æº**: 
  - åŸºæœ¬æ©Ÿèƒ½ã¯æœªãƒ­ã‚°ã‚¤ãƒ³ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
  - ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯å„ã‚¢ãƒ—ãƒªã®èªè¨¼æƒ…å ±ã‚’æ´»ç”¨ï¼ˆSSOæ¤œè¨ï¼‰

#### ãƒãƒ¼ã‚¿ãƒ«ãŒæä¾›ã™ã‚‹æ©Ÿèƒ½ï¼ˆPhase 2è¨ˆç”»ï¼‰
1. **ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸**: ã‚µãƒ¼ãƒ“ã‚¹å…¨ä½“ã®ç´¹ä»‹ãƒ»å„ã‚¢ãƒ—ãƒªã¸ã®èª˜å°
2. **çµ±åˆFAQ**: MyTeacherãƒ»ParentShareãƒ»AI-Senseiæ¨ªæ–­ã®ãƒ˜ãƒ«ãƒ—
3. **æ¨ªæ–­ãŠçŸ¥ã‚‰ã›**: è¤‡æ•°ã‚¢ãƒ—ãƒªã«å½±éŸ¿ã™ã‚‹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ»æ›´æ–°é€šçŸ¥
4. **ãŠå•ã„åˆã‚ã›**: ã‚µãƒ¼ãƒ“ã‚¹å…¨ä½“ã®å•ã„åˆã‚ã›çª“å£
5. **ã‚¢ãƒ—ãƒªãƒªãƒ³ã‚¯**: å„ã‚¢ãƒ—ãƒªã¸ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
6. **ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰**: å„ã‚¢ãƒ—ãƒªã®æ“ä½œèª¬æ˜ï¼ˆæ¨ªæ–­ãƒ»å€‹åˆ¥ä¸¡å¯¾å¿œï¼‰
7. **é–‹ç™ºãƒ–ãƒ­ã‚°**: é–‹ç™ºè€…ã®é–‹ç™ºç§˜è©±ãƒ»æŠ€è¡“è¨˜äº‹ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè£è©±ï¼ˆå…¬é–‹ã€èª°ã§ã‚‚é–²è¦§å¯èƒ½ï¼‰

#### åˆ©ç”¨ã‚·ãƒ¼ãƒ³
- âœ… ã‚¢ãƒ—ãƒªåˆ©ç”¨å‰ã®æƒ…å ±åé›†ï¼ˆæ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç²å¾—ï¼‰
- âœ… å„ã‚¢ãƒ—ãƒªåˆ©ç”¨ä¸­ã®ãƒ˜ãƒ«ãƒ—ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆæ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆï¼‰
- âœ… è¤‡æ•°ã‚¢ãƒ—ãƒªã®æ¨ªæ–­çš„ãªæƒ…å ±ç¢ºèªï¼ˆçµ±åˆç®¡ç†ï¼‰

### 5. å°†æ¥é–‹ç™ºäºˆå®šã‚¢ãƒ—ãƒªï¼ˆPhase 2-3 è¨ˆç”»ã€æœªå®Ÿè£…ï¼‰

#### ã‚¢ãƒ—ãƒªâ‘  å­è‚²ã¦æŠ€è¡“å…±æœ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆä»®ç§°: ParentShareï¼‰- **Phase 2**
- **ç›®çš„**: åˆ©ç”¨è€…åŒå£«ã§å­è‚²ã¦æŠ€è¡“ã‚’å…±æœ‰ãƒ»äº¤æµã—ã€ã‚¹ã‚­ãƒ«å‘ä¸Šã‚’ä¿ƒé€²
- **ä¸»è¦æ©Ÿèƒ½**:
  - å­è‚²ã¦ãƒã‚¦ãƒã‚¦æŠ•ç¨¿ãƒ»æ¤œç´¢
  - æ—¥ã€…ã®è¡Œå‹•ã¨ã—ã¦ã®ã‚¿ã‚¹ã‚¯åŒ–
  - MyTeacherä½¿ç”¨ä¾‹ã®å…¬é–‹ãƒ»é©ç”¨
- **MyTeacheré€£æº**: å…¬é–‹ã•ã‚ŒãŸä½¿ç”¨ä¾‹ã‚’è‡ªåˆ†ã®MyTeacherã«ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯é©ç”¨

#### ã‚¢ãƒ—ãƒªâ‘¡ AIç¿’ã„äº‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆä»®ç§°: AI-Senseiï¼‰- **Phase 3**
- **ç›®çš„**: ç¿’ã„äº‹ã¨ç‹¬å­¦ã®ä¸­é–“ã€AIãŒå€‹åˆ¥æŒ‡å°ã®ä»£æ›¿ã¨ãªã‚‹
- **ä¸»è¦æ©Ÿèƒ½**:
  - AIã«ã‚ˆã‚‹ç›®æ¨™è¨­å®šãƒ»ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ç”Ÿæˆ
  - æ®µéšçš„æŒ‡å°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æä¾›
  - é€²æ—ç®¡ç†ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- **MyTeacheré€£æº**: AIæç¤ºã®æŒ‡å°å†…å®¹ã‚’ã‚¿ã‚¹ã‚¯åŒ–ã—ã¦MyTeacherã«ç™»éŒ²

#### APIé€£æºè¦ä»¶
1. **ParentShare â†’ MyTeacher**:
   - å­è‚²ã¦ãƒã‚¦ãƒã‚¦ã®ã‚¿ã‚¹ã‚¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè»¢é€
   - ã‚¿ã‚¹ã‚¯æ§‹æˆãƒ‡ãƒ¼ã‚¿ã®JSONå½¢å¼ã§ã®å—ã‘æ¸¡ã—
   - ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚¹ã‚¯ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¿ã‚¹ã‚¯ã®ä¸€æ‹¬é©ç”¨
   
2. **AI-Sensei â†’ MyTeacher**:
   - AIãŒç”Ÿæˆã—ãŸå­¦ç¿’è¨ˆç”»ã®ã‚¿ã‚¹ã‚¯åŒ–
   - æœŸé™ä»˜ãã‚¿ã‚¹ã‚¯ã®è‡ªå‹•ç™»éŒ²
   - é€²æ—çŠ¶æ³ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é€£æº

### 6. æŠ€è¡“çš„è¦ä»¶

#### ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ä¿è­·
- **æ—¢å­˜MyTeacheræ©Ÿèƒ½**: å¤‰æ›´ãªã—ã€å®Œå…¨å‹•ä½œä¿è¨¼
- **Action-Service-Repositoryãƒ‘ã‚¿ãƒ¼ãƒ³**: ç¶™ç¶šç¶­æŒ
- **ãƒãƒ¼ã‚¿ãƒ«æ©Ÿèƒ½**: æ—¢å­˜å®Ÿè£…ã‚’æ´»ç”¨

#### æ®µéšçš„æ‹¡å¼µæˆ¦ç•¥
- **Phase 1**: MyTeacherãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªé–‹ç™ºï¼ˆFirebaseçµ±åˆï¼‰
- **Phase 2**: ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆç‹¬ç«‹åŒ– + ParentShareé–‹ç™º
- **Phase 3**: AI-Senseié–‹ç™º
- **Phase 4**: å¿…è¦ã«å¿œã˜ã¦SSOçµ±åˆãƒ»æ±ºæ¸ˆæ©Ÿèƒ½è¿½åŠ 

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
- **MyTeacher DB**: æ—¢å­˜PostgreSQLç¶™ç¶š
- **Portal DB**: ç‹¬ç«‹PostgreSQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆPhase 2ã§åˆ†é›¢ï¼‰
- **ParentShare DB**: ç‹¬ç«‹PostgreSQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
- **AI-Sensei DB**: ç‹¬ç«‹PostgreSQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
- **ãƒ‡ãƒ¼ã‚¿é€£æº**: REST APIçµŒç”±ã€DBç›´æ¥æ¥ç¶šãªã—

#### èªè¨¼è¨­è¨ˆ
- **MyTeacher Phase 1ï¼ˆâœ… å®Ÿè£…æ¸ˆã¿ï¼‰**: Cognito JWTèªè¨¼ï¼ˆVerifyCognitoToken + AuthHelperï¼‰
- **Portal Phase 2ï¼ˆè¨ˆç”»ï¼‰**: åŸºæœ¬å…¬é–‹ã€ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯å„ã‚¢ãƒ—ãƒªèªè¨¼é€£æº
- **å°†æ¥ã‚¢ãƒ—ãƒªï¼ˆPhase 2-3ï¼‰**: å„ã‚¢ãƒ—ãƒªç‹¬è‡ªèªè¨¼ + APIé€£æºç”¨ãƒˆãƒ¼ã‚¯ãƒ³
- **SSOæ¤œè¨**: å¿…è¦ã«å¿œã˜ã¦å°†æ¥çš„ã«çµ±åˆï¼ˆPhase 4ä»¥é™ï¼‰

#### å¤–éƒ¨APIçµ±åˆ
- âœ… OpenAI APIï¼ˆç¶™ç¶šï¼‰
- âœ… Replicate APIï¼ˆç¶™ç¶šï¼‰
- ğŸ”² Stripe APIï¼ˆå°†æ¥å®Ÿè£…ï¼‰
- ğŸ”² Firebaseï¼ˆãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã§å®Ÿè£…äºˆå®šï¼‰

### 7. é‹ç”¨è¦ä»¶
- **ç®¡ç†è² è·æœ€å°åŒ–**: ä¸€äººã§ç®¡ç†å¯èƒ½ãªç¯„å›²
- **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§**: çµ±åˆãƒ­ã‚°ãƒ»ç›£è¦–ã€æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **å®Ÿéš›ã®ã‚³ã‚¹ãƒˆ**: æœˆé¡$164 (~Â¥25,000) â† Phase 0.5ã§AWS Fargateæ§‹ç¯‰æ¸ˆã¿
- **ä¿å®ˆæ€§**: ä¸€äººã§ç†è§£ãƒ»ä¿®æ­£å¯èƒ½ãªã‚³ãƒ¼ãƒ‰æ§‹é€ 
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: æ®µéšçš„æˆé•·å¯¾å¿œï¼ˆéå‰°è¨­è¨ˆã¯é¿ã‘ã‚‹ï¼‰

### 8. è¨­è¨ˆåˆ¶ç´„ï¼ˆé¿ã‘ã‚‹ã¹ãäº‹é …ï¼‰
- **âŒ ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–**: è¤‡é›‘ãªåˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã¯é¿ã‘ã‚‹ï¼ˆPhase 0.5ã§Task Serviceç­‰å‰Šé™¤å®Œäº†ï¼‰
- **âŒ è¤‡æ•°AWSã‚µãƒ¼ãƒ“ã‚¹ï¼ˆéå‰°ï¼‰**: API Gatewayãƒ»Cognito User Poolãƒ»EventBridgeç­‰ã®è¤‡é›‘æ§‹æˆå›é¿
- **âŒ PWAé–‹ç™º**: æ—¢å­˜Webã§ååˆ†ã€è¿½åŠ é–‹ç™ºä¸è¦
- **âŒ ã‚ªãƒ¼ãƒãƒ¼ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°**: å¹´é–“å£²ä¸Š1000ä¸‡å††å‰æã®è¤‡é›‘è¨­è¨ˆã¯ä¸è¦
- **âœ… ãƒªãƒã‚¸ãƒˆãƒªåˆ†å‰²**: å¿…è¦ã«å¿œã˜ã¦åˆ†å‰²å¯ï¼ˆphase1-initial-planning.mdã®3æ¡ˆã¯æ¡ç”¨ã›ãšï¼‰

### 9. ãƒªãƒã‚¸ãƒˆãƒªæˆ¦ç•¥
- **MyTeacher**: ç¾åœ¨ã®ãƒªãƒã‚¸ãƒˆãƒªç¶™ç¶šï¼ˆPhase 2ã¾ã§ãƒãƒ¼ã‚¿ãƒ«çµ±åˆï¼‰
- **Portal**: Phase 2ã§ç‹¬ç«‹ãƒªãƒã‚¸ãƒˆãƒªåŒ–
- **ParentShare**: ç‹¬ç«‹ãƒªãƒã‚¸ãƒˆãƒªå¯ï¼ˆè‚¥å¤§åŒ–æ™‚ï¼‰
- **AI-Sensei**: ç‹¬ç«‹ãƒªãƒã‚¸ãƒˆãƒªå¯ï¼ˆè‚¥å¤§åŒ–æ™‚ï¼‰
- **å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: å¿…è¦ã«å¿œã˜ã¦Composerãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–

### 10. éæ©Ÿèƒ½è¦ä»¶
- **å¯ç”¨æ€§**: 99%ç¨‹åº¦ï¼ˆå€‹äººé–‹ç™ºãƒ¬ãƒ™ãƒ«ï¼‰
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: æ—¢å­˜Webç‰ˆã¨åŒç­‰ä»¥ä¸Š
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: HTTPSãƒ»èªè¨¼ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆæ—¢å­˜ãƒ¬ãƒ™ãƒ«ç¶™ç¶šï¼‰
- **API ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: ã‚¢ãƒ—ãƒªé–“é€£æºæ™‚ã®éè² è·é˜²æ­¢
- **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: APIé€£æºæ™‚ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†

---

## ğŸ¯ è¦ä»¶ç¢ºå®šå¾Œã®è¨­è¨ˆæ–¹é‡

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸºæœ¬æ–¹é‡
1. **MyTeacher**: Laravelçµ±åˆãƒ¢ãƒãƒªã‚¹ç¶™ç¶šï¼ˆPhase 1ã¾ã§ã¯ãƒãƒ¼ã‚¿ãƒ«å«ã‚€ï¼‰
2. **Portal**: Phase 2ã§ç‹¬ç«‹ãƒãƒ–ã‚µã‚¤ãƒˆåŒ–ï¼ˆLaravelæ–°è¦ã‚¢ãƒ—ãƒªï¼‰- **æœªå®Ÿè£…**
3. **å°†æ¥ã‚¢ãƒ—ãƒª**: ç‹¬ç«‹Laravelã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ Ã— 2ï¼ˆåˆ¥ãƒªãƒã‚¸ãƒˆãƒªå¯ï¼‰- **Phase 2-3è¨ˆç”»**
4. **é€£æºæ–¹å¼**: REST API ã«ã‚ˆã‚‹ç–çµåˆ
5. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: å„ã‚¢ãƒ—ãƒªç‹¬ç«‹ã€ç›´æ¥æ¥ç¶šãªã—
6. **èªè¨¼**: PortalåŸºæœ¬å…¬é–‹ã€å„ã‚¢ãƒ—ãƒªã¯ç‹¬è‡ªèªè¨¼ + APIé€£æºç”¨ãƒˆãƒ¼ã‚¯ãƒ³

### æ®µéšçš„å®Ÿè£…å„ªå…ˆé †ä½
1. **Phase 0.5ï¼ˆâœ… å®Œäº†ï¼‰**: AWS Fargateæ§‹ç¯‰ï¼ˆECS, RDS, ElastiCache, S3, CloudFrontï¼‰- $164/æœˆ
2. **Phase 1ï¼ˆğŸš§ å®Ÿè£…ä¸­ï¼‰**: Cognito JWTèªè¨¼ + Mobile APIï¼ˆ13 API Actionså®Œäº†ã€ãƒ†ã‚¹ãƒˆå®Œäº†ï¼‰
3. **Phase 2ï¼ˆğŸ“… ä¸­æœŸè¨ˆç”»ï¼‰**: ãƒãƒ¼ã‚¿ãƒ«ç‹¬ç«‹åŒ– + ParentShareé–‹ç™º + APIé€£æº
4. **Phase 3ï¼ˆğŸ“… é•·æœŸè¨ˆç”»ï¼‰**: AI-Senseié–‹ç™º + APIé€£æº
5. **Phase 4ï¼ˆğŸ“… å°†æ¥è¨ˆç”»ï¼‰**: SSOçµ±åˆãƒ»Stripeæ±ºæ¸ˆçµ±åˆ

### Phase 1ã®ã‚µãƒ–ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆå®Ÿè£…è©³ç´°ï¼‰
- **Phase 1.1ï¼ˆâœ… å®Œäº†ï¼‰**: AuthHelper + helpers.phpå®Ÿè£…
- **Phase 1.2ï¼ˆâœ… å®Œäº†ï¼‰**: 13 API Actionså®Ÿè£…ï¼ˆTask CRUD, Approval, Image, Searchï¼‰
- **Phase 1.3ï¼ˆâœ… å®Œäº†ï¼‰**: Routesè¨­å®šï¼ˆ/v1 prefix, cognito middlewareï¼‰
- **Phase 1.4ï¼ˆâœ… å®Œäº†ï¼‰**: Use statementsçµ±ä¸€ã€ã‚³ãƒ¼ãƒ‰ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- **Phase 1.5ï¼ˆğŸš§ å®Ÿæ–½ä¸­ï¼‰**: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»æ¤œè¨¼ï¼ˆ34ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ä½œæˆå®Œäº†ï¼‰

> **æ³¨æ„**: ä»¥å‰ã®å†…éƒ¨è³‡æ–™ã§ã€ŒPhase 5ã€ã¨å‘¼ã°ã‚Œã¦ã„ãŸãƒ†ã‚¹ãƒˆæ®µéšã¯ã€å®Ÿéš›ã«ã¯**Phase 1.5**ï¼ˆPhase 1ã®å®Œäº†ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã§ã™ã€‚

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆPhase 2å®Œäº†æ™‚ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Portal Hub (ç‹¬ç«‹Laravelã‚¢ãƒ—ãƒª)         â”‚
â”‚  - ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸                            â”‚
â”‚  - çµ±åˆFAQ/ãŠçŸ¥ã‚‰ã›/ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹é€šçŸ¥              â”‚
â”‚  - å„ã‚¢ãƒ—ãƒªã¸ã®ãƒªãƒ³ã‚¯                            â”‚
â”‚  - åŸºæœ¬å…¬é–‹ï¼ˆä¸€éƒ¨ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆï¼‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ ãƒªãƒ³ã‚¯/APIé€£æº
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                   â†“             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚MyTeacherâ”‚      â”‚ParentShareâ”‚    â”‚AI-Senseiâ”‚
â”‚ç‹¬ç«‹DB   â”‚â†APIâ†’â”‚ç‹¬ç«‹DB    â”‚â†APIâ†’â”‚ç‹¬ç«‹DB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ã“ã®è¦ä»¶å®šç¾©ã«åŸºã¥ãã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°ã‚’è¨­è¨ˆã„ãŸã—ã¾ã™ã€‚

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°è¨­è¨ˆ

### ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆå›³ï¼ˆPhase 2å®Œäº†æ™‚ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Portal Hub (å…¬é–‹)    â”‚  â”‚  å„ã‚¢ãƒ—ãƒª(èªè¨¼æ¸ˆã¿) â”‚
    â”‚   myteacher-hub.jp    â”‚  â”‚  myteacher.jp     â”‚
    â”‚   - ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°       â”‚  â”‚  parentshare.jp   â”‚
    â”‚   - FAQ/ãŠçŸ¥ã‚‰ã›      â”‚  â”‚  ai-sensei.jp     â”‚
    â”‚   - é–‹ç™ºãƒ–ãƒ­ã‚°        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚   - ãŠå•ã„åˆã‚ã›      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤                      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Portal       â”‚ MyTeacher    â”‚ Future Apps          â”‚
    â”‚ (Laravelç‹¬ç«‹)â”‚ (Laravelæ—¢å­˜)â”‚ (Laravelç‹¬ç«‹ Ã— 2)    â”‚
    â”‚              â”‚              â”‚                      â”‚
    â”‚ - CMS        â”‚ - ã‚¿ã‚¹ã‚¯ç®¡ç† â”‚ - ParentShare        â”‚
    â”‚ - FAQ        â”‚ - AIçµ±åˆ     â”‚ - AI-Sensei          â”‚
    â”‚ - ãƒ–ãƒ­ã‚°     â”‚ - ãƒˆãƒ¼ã‚¯ãƒ³   â”‚                      â”‚
    â”‚ - ãŠå•åˆã›   â”‚ - ã‚¢ãƒã‚¿ãƒ¼   â”‚ APIé€£æº â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚              â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚ Portal DB   â”‚â”‚MyTeacher DBâ”‚  â”‚Future Apps DBâ”‚
    â”‚ PostgreSQL  â”‚â”‚PostgreSQL  â”‚  â”‚PostgreSQL Ã— 2â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  S3/MinIO       â”‚
              â”‚  (ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

```
[ãƒ¦ãƒ¼ã‚¶ãƒ¼] â†’ [Portal Hub]
              â†“
       å„ã‚¢ãƒ—ãƒªã¸ãƒªãƒ³ã‚¯
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                    â†“            â†“
[MyTeacher]        [ParentShare]  [AI-Sensei]
    â”‚                    â”‚            â”‚
    â”‚ APIé€£æºãƒªã‚¯ã‚¨ã‚¹ãƒˆ   â”‚            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’            â”‚
    â”‚ ã‚¿ã‚¹ã‚¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ  â”‚            â”‚
    â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
    â”‚                    â”‚            â”‚
    â”‚ APIé€£æºãƒªã‚¯ã‚¨ã‚¹ãƒˆ   â”‚            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
    â”‚ å­¦ç¿’è¨ˆç”»ãƒ‡ãƒ¼ã‚¿      â”‚            â”‚
    â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

---

## ğŸ“Š Phaseåˆ¥ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### Phase 1: MyTeacherãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªï¼ˆPhase 0.5å®Œäº†å¾Œ â†’ å®Ÿè£…ä¸­ï¼‰

**æ§‹æˆ**:
```
MyTeacher Web + ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª
â”œâ”€â”€ Laravel 12 (æ—¢å­˜)
â”‚   â”œâ”€â”€ Web UI (Blade)
â”‚   â”œâ”€â”€ API (JSON + Cognito JWT)
â”‚   â””â”€â”€ Portalçµ±åˆï¼ˆ/portal/*ï¼‰
â”œâ”€â”€ React Native/Expo ã‚¢ãƒ—ãƒªï¼ˆäºˆå®šï¼‰
â”œâ”€â”€ PostgreSQL (Phase 0.5ã§æ§‹ç¯‰æ¸ˆã¿: RDS db.t4g.micro)
â”œâ”€â”€ Redis (Phase 0.5ã§æ§‹ç¯‰æ¸ˆã¿: ElastiCache cache.t4g.micro)
â”œâ”€â”€ S3 (Phase 0.5ã§æ§‹ç¯‰æ¸ˆã¿: myteacher-storage-production)
â””â”€â”€ Firebase (ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ - äºˆå®š)
```

**é–‹ç™ºå†…å®¹**:
1. âœ… æ—¢å­˜Action â†’ API Actionæ‹¡å¼µï¼ˆJSON ãƒ¬ã‚¹ãƒãƒ³ãƒ€ãƒ¼ï¼‰- 13 API Actionså®Œäº†
2. âœ… Cognito JWTèªè¨¼å¯¾å¿œï¼ˆVerifyCognitoToken middleware + AuthHelperï¼‰
3. â³ React Nativeã‚¢ãƒ—ãƒªé–‹ç™ºï¼ˆæœªç€æ‰‹ï¼‰
4. â³ Firebaseãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥çµ±åˆï¼ˆæœªç€æ‰‹ï¼‰

**ã‚¤ãƒ³ãƒ•ãƒ©**:
- Phase 0.5ã§æ§‹ç¯‰æ¸ˆã¿: AWS Fargate (ECS) + RDS + ElastiCache + S3 + CloudFront
- ãƒ‡ãƒ—ãƒ­ã‚¤: GitHub Actions â†’ ECR â†’ ECS Fargateï¼ˆè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
- æœˆé¡: **$164 (~Â¥25,000)** â† Phase 0.5ã§æ—¢ã«ç¨¼åƒä¸­

### Phase 2: ãƒãƒ¼ã‚¿ãƒ«ç‹¬ç«‹åŒ– + ParentShareï¼ˆä»®ç§°ï¼‰ï¼ˆ6ãƒ¶æœˆå¾Œï¼‰

**æ§‹æˆ**:
```
Portal Hub (æ–°è¦ç‹¬ç«‹)
â”œâ”€â”€ Laravel 12 æ–°è¦ã‚¢ãƒ—ãƒª
â”œâ”€â”€ Portalå°‚ç”¨DB (PostgreSQL)
â”œâ”€â”€ S3 (ç”»åƒãƒ»æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«)
â””â”€â”€ å„ã‚¢ãƒ—ãƒªã¸ã®ãƒªãƒ³ã‚¯ãƒ»APIé€£æº

MyTeacher (æ—¢å­˜ç¶™ç¶š)
â”œâ”€â”€ Laravel 12 (æ—¢å­˜)
â”œâ”€â”€ MyTeacher DB (æ—¢å­˜)
â”œâ”€â”€ APIé€£æºã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ 
â””â”€â”€ Portalèªè¨¼é€£æº

ParentShare (æ–°è¦é–‹ç™º)ï¼ˆä»®ç§°ï¼‰
â”œâ”€â”€ Laravel 12 æ–°è¦ã‚¢ãƒ—ãƒª
â”œâ”€â”€ ParentShareå°‚ç”¨DB (PostgreSQL)
â”œâ”€â”€ APIé€£æºã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â””â”€â”€ MyTeacheré€£æºæ©Ÿèƒ½
```

**APIé€£æºä¾‹**:
```php
// ParentShare â†’ MyTeacher ã‚¿ã‚¹ã‚¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè»¢é€
POST /api/v1/tasks/import-template
{
  "source_app": "parentshare",
  "template_id": "uuid",
  "user_id": 123,
  "task_data": {
    "title": "æœã®æº–å‚™ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³",
    "tasks": [...]
  }
}

// MyTeacher â†’ ParentShare åˆ©ç”¨çŠ¶æ³ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
POST /api/v1/usage-feedback
{
  "template_id": "uuid",
  "completion_rate": 85,
  "user_count": 10
}
```

**ã‚¤ãƒ³ãƒ•ãƒ©**:
- å„ã‚¢ãƒ—ãƒªç‹¬ç«‹ãƒ‡ãƒ—ãƒ­ã‚¤
- ç‹¬ç«‹DB Ã— 3ï¼ˆPortal, MyTeacher, ParentShareï¼‰
- å…±é€šS3ãƒã‚±ãƒƒãƒˆï¼ˆã‚¢ãƒ—ãƒªåˆ¥prefixï¼‰
- æœˆé¡: Â¥10,000-15,000

### Phase 3: AI-Senseiï¼ˆä»®ç§°ï¼‰è¿½åŠ ï¼ˆ12ãƒ¶æœˆå¾Œï¼‰

**æ§‹æˆ**:
```
4ã‚¢ãƒ—ãƒªä½“åˆ¶
â”œâ”€â”€ Portal Hub (ãƒãƒ–ã‚µã‚¤ãƒˆ)
â”œâ”€â”€ MyTeacher (ã‚¿ã‚¹ã‚¯ç®¡ç†)
â”œâ”€â”€ ParentShareï¼ˆä»®ç§°ï¼‰ (å­è‚²ã¦å…±æœ‰)
â””â”€â”€ AI-Senseiï¼ˆä»®ç§°ï¼‰ (AIç¿’ã„äº‹) â† æ–°è¦è¿½åŠ 
    â”œâ”€â”€ Laravel 12 æ–°è¦ã‚¢ãƒ—ãƒª
    â”œâ”€â”€ AI-Senseiå°‚ç”¨DB
    â”œâ”€â”€ OpenAI APIçµ±åˆ
    â””â”€â”€ MyTeacheré€£æºAPI
```

**APIé€£æºä¾‹**:
```php
// AI-Sensei â†’ MyTeacher å­¦ç¿’è¨ˆç”»ã‚¿ã‚¹ã‚¯åŒ–
POST /api/v1/tasks/import-curriculum
{
  "source_app": "ai-sensei",
  "curriculum_id": "uuid",
  "user_id": 123,
  "learning_plan": {
    "goal": "è‹±ä¼šè©±ãƒã‚¹ã‚¿ãƒ¼",
    "duration_weeks": 12,
    "tasks": [
      {
        "week": 1,
        "title": "åŸºæœ¬ãƒ•ãƒ¬ãƒ¼ã‚ºç¿’å¾—",
        "deadline": "2025-12-07"
      }
    ]
  }
}
```

**ã‚¤ãƒ³ãƒ•ãƒ©**:
- ç‹¬ç«‹DB Ã— 4
- æœˆé¡: Â¥15,000-20,000

---

## ğŸ” èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### Phase 1: Cognito JWTèªè¨¼ï¼ˆâœ… å®Ÿè£…æ¸ˆã¿ï¼‰

```php
// MyTeacher Laravel Cognito JWT
// Middleware: VerifyCognitoToken
// routes/api.php
Route::middleware('cognito')->group(function () {
    Route::post('/tasks', StoreTaskApiAction::class);
    // ... ä»–ã®13 API Actions
});

// AuthHelper: Cognitoæƒ…å ±ã‹ã‚‰è‡ªå‹•ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆãƒ»å–å¾—
$user = AuthHelper::getOrCreateCognitoUser($cognitoSub, $email, $username);

// ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªèªè¨¼
Authorization: Bearer {cognito_jwt_token}
```

### Phase 2: ã‚¢ãƒ—ãƒªé–“APIèªè¨¼

```php
// å„ã‚¢ãƒ—ãƒªã«APIèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³è¨­å®š
config/services.php:
'myteacher' => [
    'api_url' => env('MYTEACHER_API_URL'),
    'api_token' => env('MYTEACHER_API_TOKEN'),
],

// APIå‘¼ã³å‡ºã—
Http::withToken(config('services.myteacher.api_token'))
    ->post(config('services.myteacher.api_url') . '/api/v1/tasks/import-template', [...]);
```

### Phase 4: SSOçµ±åˆï¼ˆå°†æ¥ï¼‰

```php
// Laravel Socialite + å„ã‚¢ãƒ—ãƒªçµ±åˆ
// ã¾ãŸã¯ Auth0/Oktaç­‰ã®å¤–éƒ¨SSOã‚µãƒ¼ãƒ“ã‚¹
```

---

## ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### å„ã‚¢ãƒ—ãƒªDBç‹¬ç«‹æ§‹æˆ

**Portal DB** (PostgreSQL):
```sql
-- ãƒãƒ¼ã‚¿ãƒ«å°‚ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«
portal_pages           -- ãƒšãƒ¼ã‚¸ç®¡ç†
portal_faqs            -- FAQ
portal_news            -- ãŠçŸ¥ã‚‰ã›
portal_blog_posts      -- é–‹ç™ºãƒ–ãƒ­ã‚°
portal_contacts        -- ãŠå•ã„åˆã‚ã›
portal_maintenances    -- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹é€šçŸ¥
```

**MyTeacher DB** (PostgreSQL - æ—¢å­˜):
```sql
-- æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ç¶™ç¶š
users
tasks
teacher_avatars
token_transactions
scheduled_group_tasks
task_images
avatar_images
...
```

**ParentShare DB** (PostgreSQL):
```sql
-- ParentShareå°‚ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«
ps_users               -- ParentShareãƒ¦ãƒ¼ã‚¶ãƒ¼
ps_posts               -- ãƒã‚¦ãƒã‚¦æŠ•ç¨¿
ps_templates           -- ã‚¿ã‚¹ã‚¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
ps_comments            -- ã‚³ãƒ¡ãƒ³ãƒˆ
ps_likes               -- ã„ã„ã­
ps_usage_stats         -- åˆ©ç”¨çµ±è¨ˆ
```

**AI-Sensei DB** (PostgreSQL):
```sql
-- AI-Senseiå°‚ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«
as_users               -- AI-Senseiãƒ¦ãƒ¼ã‚¶ãƒ¼
as_curriculums         -- ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ 
as_learning_plans      -- å­¦ç¿’è¨ˆç”»
as_progress            -- é€²æ—ç®¡ç†
as_ai_feedback         -- AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
```

### ãƒ‡ãƒ¼ã‚¿é€£æºæˆ¦ç•¥

```php
// APIçµŒç”±ã§ã®ãƒ‡ãƒ¼ã‚¿è»¢é€ï¼ˆDBç›´æ¥æ¥ç¶šãªã—ï¼‰
// å„ã‚¢ãƒ—ãƒªã¯ç‹¬ç«‹ã€ç–çµåˆã‚’ç¶­æŒ
```

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­è¨ˆ

### S3ãƒã‚±ãƒƒãƒˆæ§‹æˆ

```
myteacher-storage/
â”œâ”€â”€ portal/
â”‚   â”œâ”€â”€ blog/              -- ãƒ–ãƒ­ã‚°ç”»åƒ
â”‚   â”œâ”€â”€ news/              -- ãŠçŸ¥ã‚‰ã›ç”»åƒ
â”‚   â””â”€â”€ uploads/           -- ãŠå•ã„åˆã‚ã›æ·»ä»˜
â”œâ”€â”€ myteacher/
â”‚   â”œâ”€â”€ task_approvals/    -- ã‚¿ã‚¹ã‚¯æ‰¿èªç”»åƒ
â”‚   â”œâ”€â”€ avatars/           -- ã‚¢ãƒã‚¿ãƒ¼ç”»åƒ
â”‚   â””â”€â”€ task_images/       -- ã‚¿ã‚¹ã‚¯ç”»åƒ
â”œâ”€â”€ parentshare/
â”‚   â”œâ”€â”€ posts/             -- æŠ•ç¨¿ç”»åƒ
â”‚   â””â”€â”€ templates/         -- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”»åƒ
â””â”€â”€ ai-sensei/
    â”œâ”€â”€ materials/         -- å­¦ç¿’æ•™æ
    â””â”€â”€ feedback/          -- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ·»ä»˜
```

### Laravelè¨­å®š

```php
// å„ã‚¢ãƒ—ãƒªå…±é€šS3è¨­å®šã€prefixã§åˆ†é›¢
's3' => [
    'driver' => 's3',
    'bucket' => env('AWS_BUCKET'),
    'prefix' => env('APP_NAME'),  // 'portal', 'myteacher', 'parentshare'
    ...
]
```

---

## ğŸ”„ APIé€£æºä»•æ§˜

### APIèªè¨¼ãƒ•ãƒ­ãƒ¼

```
1. å„ã‚¢ãƒ—ãƒªã¯å›ºæœ‰ã®API_TOKENã‚’ä¿æŒ
2. ã‚¢ãƒ—ãƒªé–“é€šä¿¡ã¯Bearerèªè¨¼
3. IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
4. ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆ1000req/hour/appï¼‰
```

### å…±é€šAPIãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

```json
{
  "success": true,
  "data": { ... },
  "message": "Operation successful",
  "meta": {
    "timestamp": "2025-11-29T10:00:00Z",
    "version": "v1"
  }
}
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```json
{
  "success": false,
  "error": {
    "code": "INVALID_TEMPLATE",
    "message": "Template not found",
    "details": { ... }
  }
}
```

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥

### Phase 1: å˜ç´”ãƒ‡ãƒ—ãƒ­ã‚¤

```yaml
# GitHub Actions
name: Deploy MyTeacher
on:
  push:
    branches: [main]
jobs:
  deploy:
    - composer install
    - npm run build
    - php artisan migrate
    - Deploy to Heroku/Railway
```

### Phase 2: ãƒãƒ«ãƒã‚¢ãƒ—ãƒªãƒ‡ãƒ—ãƒ­ã‚¤

```yaml
# å„ã‚¢ãƒ—ãƒªç‹¬ç«‹ãƒªãƒã‚¸ãƒˆãƒª â†’ ç‹¬ç«‹ãƒ‡ãƒ—ãƒ­ã‚¤
myteacher-app/     â†’ myteacher.jp
portal-hub/        â†’ myteacher-hub.jp
parentshare-app/   â†’ parentshare.jp
```

### Phase 3: Infrastructure as Code

```hcl
# Terraform (å°†æ¥å¿…è¦ã«å¿œã˜ã¦)
resource "aws_db_instance" "portal" { ... }
resource "aws_db_instance" "myteacher" { ... }
resource "aws_db_instance" "parentshare" { ... }
```

---

## ğŸ’° Phaseåˆ¥ã‚³ã‚¹ãƒˆè¦‹ç©

### Phase 1: MyTeacher + ãƒ¢ãƒã‚¤ãƒ«ï¼ˆâœ… Phase 0.5ã‚¤ãƒ³ãƒ•ãƒ©ã§ç¨¼åƒä¸­ï¼‰

| é …ç›® | æœˆé¡ |
|------|------|
| ECS Fargate (2-8 tasks Auto Scaling) | $45-65 |
| Application Load Balancer | $16-23 |
| RDS PostgreSQL (db.t4g.micro) | $15-20 |
| ElastiCache Redis (cache.t4g.micro) | $15-20 |
| S3 (ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸) | $3-5 |
| CloudFront (CDN) | $5-10 |
| ãã®ä»–ï¼ˆRoute 53, CloudWatchç­‰ï¼‰ | $5-10 |
| Firebase (ç„¡æ–™æ äºˆå®š) | Â¥0 |
| Expo EAS (å¹´é–“äºˆå®š) | Â¥250/æœˆ |
| **åˆè¨ˆ** | **$164/æœˆ (~Â¥25,000)** |

### Phase 2: Portal + ParentShareè¿½åŠ 

| é …ç›® | æœˆé¡ |
|------|------|
| Heroku/Railway Ã— 3 | Â¥3,000 |
| PostgreSQL Ã— 3 | Â¥0 (å«ã¾ã‚Œã‚‹) |
| S3 (50GB) | Â¥1,500 |
| Firebase | Â¥0-500 |
| **åˆè¨ˆ** | **Â¥4,500-5,000/æœˆ** |

### Phase 3: AI-Senseiè¿½åŠ 

| é …ç›® | æœˆé¡ |
|------|------|
| Heroku/Railway Ã— 4 | Â¥4,000 |
| PostgreSQL Ã— 4 | Â¥0 (å«ã¾ã‚Œã‚‹) |
| S3 (100GB) | Â¥3,000 |
| OpenAI API | Â¥5,000-10,000 |
| Firebase | Â¥1,000 |
| **åˆè¨ˆ** | **Â¥13,000-18,000/æœˆ** |

**é‡è¦**: ä¸Šè¨˜ã¯æœ€å°æ§‹æˆã€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯å¢—åŠ ã§æ®µéšçš„ã«ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—

---

## ğŸ“‹ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1 å®Œäº†æ¡ä»¶

- [x] MyTeacher API Actionå®Ÿè£…ï¼ˆå…¨æ—¢å­˜æ©Ÿèƒ½ï¼‰â† 13 API Actionså®Œäº†
- [x] Cognito JWTèªè¨¼å®Ÿè£…ï¼ˆVerifyCognitoToken + AuthHelperï¼‰
- [x] API Routesè¨­å®šï¼ˆ/v1 prefix, cognito middlewareï¼‰
- [x] ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ä½œæˆï¼ˆ34ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰: AuthHelper, CognitoAuth, TaskApiï¼‰
- [ ] React Nativeã‚¢ãƒ—ãƒªé–‹ç™ºï¼ˆiOS/Androidï¼‰
- [ ] Firebaseãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥çµ±åˆ
- [ ] App Store/Google Playç”³è«‹ãƒ»å…¬é–‹
- [x] æ—¢å­˜Webæ©Ÿèƒ½ç¶™ç¶šå‹•ä½œç¢ºèªï¼ˆAWS Fargateç¨¼åƒä¸­ï¼‰
- [x] ãƒãƒ¼ã‚¿ãƒ«æ©Ÿèƒ½ï¼ˆLaravelçµ±åˆï¼‰å‹•ä½œç¢ºèª

### Phase 2 å®Œäº†æ¡ä»¶

- [ ] Portalç‹¬ç«‹Laravelæ–°è¦ã‚¢ãƒ—ãƒªä½œæˆ
- [ ] Portal DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] FAQ/ãŠçŸ¥ã‚‰ã›/ãƒ–ãƒ­ã‚°ç®¡ç†ç”»é¢å®Ÿè£…
- [ ] é–‹ç™ºãƒ–ãƒ­ã‚°æ©Ÿèƒ½å®Ÿè£…
- [ ] ParentShare Laravelæ–°è¦ã‚¢ãƒ—ãƒªä½œæˆ
- [ ] ParentShare DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] MyTeacher â‡” ParentShare APIé€£æºå®Ÿè£…
- [ ] å„ã‚¢ãƒ—ãƒªç‹¬ç«‹ãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª

### Phase 3 å®Œäº†æ¡ä»¶

- [ ] AI-Sensei Laravelæ–°è¦ã‚¢ãƒ—ãƒªä½œæˆ
- [ ] AI-Sensei DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] OpenAI APIçµ±åˆ
- [ ] MyTeacher â‡” AI-Sensei APIé€£æºå®Ÿè£…
- [ ] ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ç”Ÿæˆæ©Ÿèƒ½å®Ÿè£…
- [ ] é€²æ—ç®¡ç†æ©Ÿèƒ½å®Ÿè£…

---

## ğŸ¯ æˆåŠŸã®éµ

### 1. æ®µéšçš„å®Ÿè£…ã®å¾¹åº•
- Phase 1å®Œäº†å¾Œã€å¿…ãšé‹ç”¨è©•ä¾¡æœŸé–“ã‚’è¨­ã‘ã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†â†’æ”¹å–„â†’æ¬¡Phase
- ç„¦ã‚‰ãšã€ç¢ºå®Ÿã«

### 2. ã‚·ãƒ³ãƒ—ãƒ«ã•ã®ç¶­æŒ
- ã€Œã“ã‚Œæœ¬å½“ã«å¿…è¦ï¼Ÿã€ã‚’å¸¸ã«å•ã†
- è¤‡é›‘ãªæ©Ÿèƒ½ã¯å¾Œå›ã—
- MVPã‚’ç´ æ—©ããƒªãƒªãƒ¼ã‚¹

### 3. ã‚³ã‚¹ãƒˆæ„è­˜
- æœˆé¡2ä¸‡å††ã‚’è¶…ãˆã‚‹å‰ã«åç›ŠåŒ–æˆ¦ç•¥
- ç„¡æ–™æ ã‚’æœ€å¤§æ´»ç”¨
- å¾“é‡èª²é‡‘ã®ç›£è¦–ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

### 4. å€‹äººé–‹ç™ºã®å¼·ã¿æ´»ç”¨
- æ„æ€æ±ºå®šãŒæ—©ã„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å£°ã«å³åº§ã«å¯¾å¿œ
- æŠ€è¡“é¸æŠã®è‡ªç”±åº¦

---

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€**å€‹äººé–‹ç™ºè€…ãŒç„¡ç†ãªãé‹ç”¨ã§ãã‚‹**ã€**æ®µéšçš„ã«æˆé•·ã§ãã‚‹**ã€**ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆãŸ**çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®Ÿç¾ã—ã¾ã™ã€‚
    
### AWS Fargateãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### ç¾åœ¨ã®æ§‹æˆ (Phase 0.5å®Œäº†æ™‚ç‚¹)

**æœ¬ç•ªç’°å¢ƒãƒªã‚½ãƒ¼ã‚¹**:
- **ECS Fargate**: myteacher-production-cluster (CPU 512, Memory 1024, 2-8ã‚¿ã‚¹ã‚¯ Auto Scaling)
- **RDS PostgreSQL**: db.t4g.micro (myteacher-production-db)
- **ElastiCache Redis**: cache.t4g.micro (myteacher-production-redis)
- **S3**: myteacher-storage-production (ç”»åƒ), myteacher-portal-site (é™çš„ãƒãƒ¼ã‚¿ãƒ«)
- **CloudFront**: HTTPS CDNé…ä¿¡ (my-teacher-app.com)
- **Route 53**: DNSç®¡ç†
- **ALB**: Application Load Balancer
- **ECR**: Container Registry
- **EFS**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  (ãƒ­ã‚°ç­‰)

**æœˆé¡ã‚³ã‚¹ãƒˆ**: ç´„$164/æœˆ (~Â¥25,000)

**ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•**: GitHub Actions â†’ ECR â†’ ECS Fargate (è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã€è¤‡æ•°å›/æ—¥)

#### ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–¢é€£ãƒªã‚½ãƒ¼ã‚¹ (å‰Šé™¤å¯¾è±¡)

**Task Service** (Node.js):
- **ECS Fargate**: åˆ¥ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã§ç¨¼åƒ
- **RDS**: db.t3.micro (task-service-db)
- **GitHub Actions**: CI/CDæ§‹ç¯‰æ¸ˆã¿
- **å®Ÿè£…çŠ¶æ³**: 75%å®Œæˆã€37ãƒ•ã‚¡ã‚¤ãƒ«

**AI Service** (Lambda):
- **AWS SAM**: Lambdaå®Ÿè£…äºˆå®š
- **å®Ÿè£…çŠ¶æ³**: 60%å®Œæˆã€22ãƒ•ã‚¡ã‚¤ãƒ«

**Portalç”¨ã‚¤ãƒ³ãƒ•ãƒ©** (å‰Šé™¤å¯¾è±¡):
- **Cognito**: User Pool + Identity Pool
- **API Gateway**: REST API
- **DynamoDB**: 4ãƒ†ãƒ¼ãƒ–ãƒ« (app_updates, contacts, faqs, maintenances)

**å‰Šé™¤åŠ¹æœ**:
- **ã‚³ã‚¹ãƒˆå‰Šæ¸›**: ç´„$30-50/æœˆå‰Šæ¸›è¦‹è¾¼ã¿
- **ç®¡ç†è² è·è»½æ¸›**: ECSåˆ¥ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã€RDSè¿½åŠ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã€Cognitoã€API Gatewayã€DynamoDBå‰Šé™¤
- **ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤**: 76ãƒ•ã‚¡ã‚¤ãƒ« (4äººæ—¥ç›¸å½“)

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°è¨­è¨ˆ (AWS Fargateç¶™ç¶šç‰ˆ)

### Phase 1å®Œäº†æ™‚ç‚¹ã®æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Route 53 DNS        â”‚  â”‚  CloudFront CDN   â”‚
    â”‚  my-teacher-app.com   â”‚  â”‚  (HTTPSé…ä¿¡)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                     â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  ALB (HTTPS)       â”‚
                â”‚  ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¤œè¨¼   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ECS Fargate Cluster    â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
            â”‚  â”‚ MyTeacher App    â”‚   â”‚
            â”‚  â”‚ Laravel 12       â”‚   â”‚
            â”‚  â”‚ (2-8 tasks)      â”‚   â”‚
            â”‚  â”‚ + Mobile API     â”‚   â”‚
            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚   â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚ RDS PostgreSQLâ”‚ â”‚ElastiCacheâ”‚  â”‚  S3 Buckets â”‚
â”‚ db.t4g.micro â”‚  â”‚   Redis   â”‚  â”‚ - storage   â”‚
â”‚ (MyTeacher)  â”‚  â”‚cache.t4g.microâ”‚ â”‚ - portal  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2å®Œäº†æ™‚ç‚¹ã®æ§‹æˆå›³ (Portalç‹¬ç«‹åŒ– + ParentShareè¿½åŠ )

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Route 53 DNS   â”‚  â”‚ CloudFront CDN â”‚
    â”‚  - my-teacher... â”‚  â”‚  (å…±é€šHTTPS)   â”‚
    â”‚  - portal...    â”‚  â”‚                â”‚
    â”‚  - parentshare..â”‚  â”‚                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ALB (å…±é€š)      â”‚
            â”‚  ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ECS Fargate â”‚  â”‚ECS Farâ”‚  â”‚ECS Fargate  â”‚
â”‚MyTeacher   â”‚  â”‚Portal â”‚  â”‚ParentShare  â”‚
â”‚(æ—¢å­˜)      â”‚  â”‚(æ–°è¦) â”‚  â”‚(æ–°è¦)       â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚               â”‚            â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚RDS (æ—¢å­˜)â”‚  â”‚RDS (æ–°)â”‚  â”‚RDS (æ–°)     â”‚
â”‚MyTeacher â”‚  â”‚Portal  â”‚  â”‚ParentShare  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚               â”‚            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                       â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚ElastiCache Redisâ”‚      â”‚ S3 (å…±é€š)  â”‚
            â”‚  (å…±é€šã‚»ãƒƒã‚·ãƒ§ãƒ³) â”‚      â”‚ - storage  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ - portal   â”‚
                                     â”‚ - parent...â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¨­è¨ˆæ–¹é‡

1. **ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å‰Šé™¤**:
   - Task Service (ECS Fargateåˆ¥ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼) â†’ å‰Šé™¤
   - Task Service DB (RDS db.t3.micro) â†’ å‰Šé™¤
   - Cognito/API Gateway/DynamoDB â†’ å‰Šé™¤
   - MyTeacher Laravelã«ã‚¿ã‚¹ã‚¯APIçµ±åˆ (æ—¢å­˜ã‚³ãƒ¼ãƒ‰æ´»ç”¨)

2. **Phase 1: MyTeacher Mobileå¯¾å¿œ**:
   - æ—¢å­˜ECS Fargateã§ç¶™ç¶šç¨¼åƒ
   - Laravel Sanctum APIã‚’ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‹ã‚‰å‘¼ã³å‡ºã—
   - React Native/Flutterç­‰ã§ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªé–‹ç™º
   - Firebase Cloud Messagingã§ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥

3. **Phase 2: Portalç‹¬ç«‹åŒ– + ParentShareè¿½åŠ **:
   - Portal: æ–°è¦ECS Fargate task + æ–°è¦RDS
   - ParentShare: æ–°è¦ECS Fargate task + æ–°è¦RDS
   - ALBã§ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° (`/portal/*`, `/parentshare/*`)
   - å„ã‚¢ãƒ—ãƒªç‹¬ç«‹DBã€APIé€£æº

4. **Phase 3: AI-Senseiè¿½åŠ **:
   - AI-Sensei: æ–°è¦ECS Fargate task + æ–°è¦RDS
   - Phase 2ã¨åŒæ§˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§è¿½åŠ 

---

## ğŸ“‚ å®Ÿè£…æ§‹é€  (AWS Fargateãƒ™ãƒ¼ã‚¹)

### Phase 1: MyTeacher Mobile APIè¿½åŠ 

**Laravelæ—¢å­˜ã‚³ãƒ¼ãƒ‰æ‹¡å¼µ**:
```
laravel/app/Http/Actions/
â”œâ”€â”€ Task/                        # æ—¢å­˜Webç‰ˆActionç¶™ç¶š
â”‚   â”œâ”€â”€ StoreTaskAction.php
â”‚   â””â”€â”€ ApproveTaskAction.php
â””â”€â”€ Api/                         # æ–°è¦ãƒ¢ãƒã‚¤ãƒ«API
    â””â”€â”€ Task/
        â”œâ”€â”€ StoreTaskApiAction.php  # æ—¢å­˜Serviceã‚’ãã®ã¾ã¾DI
        â””â”€â”€ ApproveTaskApiAction.php

laravel/routes/api.php           # ãƒ¢ãƒã‚¤ãƒ«ç”¨APIãƒ«ãƒ¼ãƒˆè¿½åŠ 
Route::middleware('auth:sanctum')->group(function () {
    Route::post('/tasks', \App\Http\Actions\Api\Task\StoreTaskApiAction::class);
});
```

**ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª (React Native/Flutter)**:
- GitHubç‹¬ç«‹ãƒªãƒã‚¸ãƒˆãƒª: `myteacher-mobile`
- Expo/React Native or Flutter
- Laravel Sanctumãƒˆãƒ¼ã‚¯ãƒ³ã§APIèªè¨¼
- Firebase Cloud Messaging (ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥)

**ã‚¤ãƒ³ãƒ•ãƒ©å¤‰æ›´**: ãªã— (æ—¢å­˜ECS Fargateã§å¯¾å¿œ)

### Phase 2: Portalç‹¬ç«‹åŒ– + ParentShareè¿½åŠ 

**æ–°è¦Laravelã‚¢ãƒ—ãƒª (Portal)**:
- GitHubç‹¬ç«‹ãƒªãƒã‚¸ãƒˆãƒª: `portal-hub`
- Laravel 12æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- æ—¢å­˜ `resources/views/portal/*` ã‚’ç§»è¡Œ
- ç‹¬ç«‹RDS PostgreSQL (db.t4g.micro)
- ç‹¬ç«‹ECS Fargate task

**æ–°è¦Laravelã‚¢ãƒ—ãƒª (ParentShare)**:
- GitHubç‹¬ç«‹ãƒªãƒã‚¸ãƒˆãƒª: `parentshare`
- Laravel 12æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- å­è‚²ã¦ãƒã‚¦ãƒã‚¦æŠ•ç¨¿ãƒ»æ¤œç´¢æ©Ÿèƒ½
- ç‹¬ç«‹RDS PostgreSQL (db.t4g.micro)
- ç‹¬ç«‹ECS Fargate task

**APIé€£æº**:
```php
// ParentShare â†’ MyTeacher (ãƒã‚¦ãƒã‚¦ã‚’ã‚¿ã‚¹ã‚¯åŒ–)
POST https://my-teacher-app.com/api/external/import-task
Authorization: Bearer {API_TOKEN}
Body: {
  "template_id": "parent-123",
  "task_data": {...}
}

// MyTeacher â†’ ParentShare (ä½¿ç”¨ä¾‹ã‚’å…¬é–‹)
POST https://parentshare-app.com/api/external/publish-template
Authorization: Bearer {API_TOKEN}
Body: {
  "user_id": "456",
  "task_group_id": "uuid-xxx",
  "visibility": "public"
}
```

**ALBè¨­å®š (ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)**:
```hcl
# Terraform: alb.tf
resource "aws_lb_listener_rule" "portal" {
  listener_arn = aws_lb_listener.https.arn

  action {
    type             = "forward"
    target_group_arn = aws_lb_target_group.portal.arn
  }

  condition {
    path_pattern {
      values = ["/portal/*"]
    }
  }
}

resource "aws_lb_listener_rule" "parentshare" {
  listener_arn = aws_lb_listener.https.arn

  action {
    type             = "forward"
    target_group_arn = aws_lb_target_group.parentshare.arn
  }

  condition {
    path_pattern {
      values = ["/parentshare/*"]
    }
  }
}
```

---

## ğŸš€ æ®µéšçš„å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 0.6: ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å‰Šé™¤ (1-2é€±é–“)

**ä½œæ¥­å†…å®¹**:
1. Task Serviceåœæ­¢ãƒ»å‰Šé™¤ (ECS, RDS db.t3.micro)
2. Cognito/API Gateway/DynamoDBå‰Šé™¤
3. MyTeacher Laravelå†…ã«ã‚¿ã‚¹ã‚¯APIçµ±åˆ (æ—¢å­˜Serviceæ´»ç”¨)
4. TerraformçŠ¶æ…‹æ›´æ–°

**ã‚³ã‚¹ãƒˆå‰Šæ¸›**: ç´„$30-50/æœˆ

**å‰Šé™¤ãƒ•ã‚¡ã‚¤ãƒ«**: 76ãƒ•ã‚¡ã‚¤ãƒ«

### Phase 1: MyTeacher Mobileå¯¾å¿œ (2-3ãƒ¶æœˆ)

**ä½œæ¥­å†…å®¹**:
1. **Cognito JWTèªè¨¼å®Ÿè£…** âš ï¸
   - ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ä½œæˆ (`app/Helpers/AuthHelper.php`)
   - ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢æ‹¡å¼µ (`VerifyCognitoToken`)
   - æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã® `$request->user()` äº’æ›æ€§ç¢ºä¿
   - Cognitoãƒ¦ãƒ¼ã‚¶ãƒ¼ â‡” Laravelãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªå‹•ãƒãƒƒãƒ”ãƒ³ã‚°
2. **Laravel API Actionå®Ÿè£…**
   - Cognitoèªè¨¼å¯¾å¿œã®API Actionä½œæˆ
   - ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚¹ã‚¯å¯¾å¿œ
   - Responderä½¿ç”¨ï¼ˆJSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ•´å½¢ï¼‰
   - ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: `/v1/tasks`, `/v1/tasks/{id}`
3. React Native/Flutterã‚¢ãƒ—ãƒªé–‹ç™º
4. Firebase Cloud Messagingçµ±åˆ
5. App Store/Google Playç”³è«‹

**Cognitoå®Ÿè£…æ³¨æ„äº‹é …** âš ï¸:

1. **ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°å¿…é ˆ**:
   - `AuthHelper::getOrCreateCognitoUser()` å®Ÿè£…
   - åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®è‡ªå‹•ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
   - `$request->user()` ã®å‹•ä½œä¿è¨¼

2. **æ—¢å­˜ã‚³ãƒ¼ãƒ‰å½±éŸ¿ç¯„å›²**:
   - `$request->user()` ä½¿ç”¨ç®‡æ‰€: å…¨API Actionã§å‹•ä½œç¢ºèª
   - ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã® `setUserResolver()` ã§è‡ªå‹•è§£æ±º
   - ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°åŒ–ã«ã‚ˆã‚Šæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´æœ€å°åŒ–

3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª**:
   - `users.cognito_sub` ã‚«ãƒ©ãƒ å­˜åœ¨ç¢ºèª âœ…ï¼ˆæ—¢å­˜ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
   - `users.auth_provider` ENUM('breeze', 'cognito') âœ…

4. **ãƒ­ã‚°ãƒ»ç›£è¦–**:
   - Cognitoãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆãƒ­ã‚°è¨˜éŒ²
   - JWTæ¤œè¨¼å¤±æ•—ãƒ­ã‚°è¨˜éŒ²
   - èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¤å®šãƒ­ã‚°

**API Actionä½œæˆæ™‚ã®æ³¨æ„äº‹é …** âš ï¸ï¼ˆé‡è¦ï¼‰:

1. **æ—¢å­˜Webç‰ˆActionã®å…¨é‡ç¢ºèªå¿…é ˆ**:
   - `find app/Http/Actions/{ãƒ‰ãƒ¡ã‚¤ãƒ³} -name "*.php"` ã§å…¨Actionã‚’åˆ—æŒ™
   - å„Actionã® `__invoke` ãƒ¡ã‚½ãƒƒãƒ‰ã‚·ã‚°ãƒãƒãƒ£ã‚’ç¢ºèª
   - `routes/web.php` ã§å®Ÿéš›ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹Actionã‚’ç‰¹å®š

2. **ãƒ¢ãƒã‚¤ãƒ«APIå¿…è¦æ€§ã®ä½“ç³»çš„åˆ¤æ–­**:
   - **å¿…é ˆCRUD**: Store, Index, Update, Destroy
   - **å¿…é ˆçŠ¶æ…‹å¤‰æ›´**: ToggleCompletionï¼ˆå®Œäº†/æœªå®Œäº†ï¼‰
   - **å¿…é ˆæ‰¿èªãƒ•ãƒ­ãƒ¼**: Approve, Rejectï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚¹ã‚¯å¯¾å¿œï¼‰
   - **å¿…é ˆç”»åƒæ©Ÿèƒ½**: UploadImage, DeleteImageï¼ˆè¨¼æ‹ ç”»åƒå¯¾å¿œï¼‰
   - **ä»»æ„æ©Ÿèƒ½**: æ¤œç´¢ã€AIææ¡ˆã€ä¸€æ‹¬æ“ä½œï¼ˆPhase 2ä»¥é™æ¤œè¨ï¼‰
   - **Webå°‚ç”¨**: ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤ºActionï¼ˆCreate, Editç”»é¢ï¼‰

3. **API Actionä½œæˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
   - [ ] æ—¢å­˜Webç‰ˆActionã‚’å‚ç…§ï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ç†è§£ï¼‰
   - [ ] Service/Repositoryã®å†åˆ©ç”¨ï¼ˆDIï¼‰
   - [ ] Cognitoèªè¨¼å¯¾å¿œï¼ˆ`$request->user()`ï¼‰
   - [ ] æ‰€æœ‰æ¨©ãƒã‚§ãƒƒã‚¯ï¼ˆ`task->user_id === $user->id`ï¼‰
   - [ ] JSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼çµ±ä¸€ï¼ˆ`success`, `message`, `data`ï¼‰
   - [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆtry-catch + ãƒ­ã‚°è¨˜éŒ²ï¼‰
   - [ ] routes/api.php ã«ãƒ«ãƒ¼ãƒˆè¿½åŠ ï¼ˆuseæ–‡ã‚‚å¿˜ã‚Œãšã«ï¼‰

4. **è¦‹è½ã¨ã—é˜²æ­¢ã®ãŸã‚ã®ç¢ºèªæ–¹æ³•**:
   ```bash
   # å…¨Task Actionã‚’åˆ—æŒ™
   find app/Http/Actions/Task -name "*.php" -type f | sort
   
   # å„Actionã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚·ã‚°ãƒãƒãƒ£ç¢ºèª
   grep -A 3 "public function __invoke" app/Http/Actions/Task/*.php
   
   # routes/web.php ã§å®Ÿéš›ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹Actionç¢ºèª
   grep "Action::class" routes/web.php | grep Task
   ```

5. **æ—¢å­˜Action â†’ API Actionå¤‰æ›ãƒ‘ã‚¿ãƒ¼ãƒ³**:
   - Webç‰ˆãŒ `RedirectResponse` â†’ APIç‰ˆã¯ `JsonResponse`
   - Webç‰ˆãŒ `view()` â†’ APIç‰ˆã¯ `response()->json()`
   - Webç‰ˆãŒ `withErrors()` â†’ APIç‰ˆã¯ `['success' => false, 'message' => ...]`
   - Webç‰ˆãŒ `session()->flash()` â†’ APIç‰ˆã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã‚ã‚‹
   - Serviceãƒ­ã‚¸ãƒƒã‚¯ã¯**ãã®ã¾ã¾å†åˆ©ç”¨**ï¼ˆé‡è¤‡å®Ÿè£…ç¦æ­¢ï¼‰

**å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- `docs/operations/cognito-user-mapping-design.md` - Cognitoãƒãƒƒãƒ”ãƒ³ã‚°è¨­è¨ˆæ›¸

**è¿½åŠ ã‚³ã‚¹ãƒˆ**:
- Firebase: $0/æœˆ (ç„¡æ–™æ )
- Apple Developer: $99/å¹´
- Google Play: $25 (åˆå›ã®ã¿)

**æœˆé¡æ›ç®—**: ç´„$10/æœˆ (ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢è²»ç”¨ã®ã¿)

### Phase 2: Portalç‹¬ç«‹åŒ– + ParentShare (3-4ãƒ¶æœˆ)

**ä½œæ¥­å†…å®¹**:
1. Portalç‹¬ç«‹Laravelã‚¢ãƒ—ãƒªä½œæˆ (æ–°è¦ECS + RDS)
2. ParentShare Laravelã‚¢ãƒ—ãƒªä½œæˆ (æ–°è¦ECS + RDS)
3. ALBãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š
4. APIé€£æºå®Ÿè£… (MyTeacher â‡” ParentShare)
5. æ—¢å­˜ `resources/views/portal/*` ç§»è¡Œ

**è¿½åŠ ã‚³ã‚¹ãƒˆ**:
- ECS Fargate Ã— 2 (Portal + ParentShare): $71/æœˆ Ã— 2 = $142/æœˆ
- RDS db.t4g.micro Ã— 2: $13/æœˆ Ã— 2 = $26/æœˆ
- **Phase 2è¿½åŠ **: ç´„$168/æœˆ

**Phase 2å®Œäº†æ™‚ç‚¹ã®ç·ã‚³ã‚¹ãƒˆ**: $164 (Phase 0.5) - $40 (ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å‰Šé™¤) + $168 (Phase 2è¿½åŠ ) = **$292/æœˆ** (~Â¥45,000)

### Phase 3: AI-Senseiè¿½åŠ  (4-5ãƒ¶æœˆ)

**ä½œæ¥­å†…å®¹**:
1. AI-Sensei Laravelã‚¢ãƒ—ãƒªä½œæˆ (æ–°è¦ECS + RDS)
2. OpenAI APIçµ±åˆ (ç›®æ¨™è¨­å®šãƒ»ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ç”Ÿæˆ)
3. APIé€£æºå®Ÿè£… (AI-Sensei â†’ MyTeacher)

**è¿½åŠ ã‚³ã‚¹ãƒˆ**:
- ECS Fargate: $71/æœˆ
- RDS db.t4g.micro: $13/æœˆ
- **Phase 3è¿½åŠ **: ç´„$84/æœˆ

**Phase 3å®Œäº†æ™‚ç‚¹ã®ç·ã‚³ã‚¹ãƒˆ**: $292 (Phase 2) + $84 (Phase 3) = **$376/æœˆ** (~Â¥58,000)

---

## ğŸ’° ã‚³ã‚¹ãƒˆåˆ†æ

### Phaseåˆ¥ã‚³ã‚¹ãƒˆæ¨ç§»

| Phase | æœˆé¡ã‚³ã‚¹ãƒˆ (USD) | æœˆé¡ã‚³ã‚¹ãƒˆ (JPY) | ä¸»ãªè¿½åŠ é …ç›® |
|-------|-----------------|-----------------|------------|
| **Phase 0.5 (ç¾åœ¨)** | $164 | ~Â¥25,000 | MyTeacheræœ¬ç•ªç’°å¢ƒ |
| **Phase 0.6 (å‰Šé™¤)** | $124 | ~Â¥19,000 | ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å‰Šé™¤ (-$40) |
| **Phase 1 (Mobile)** | $134 | ~Â¥20,500 | ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª (+$10) |
| **Phase 2 (Portal+ParentShare)** | $292 | ~Â¥45,000 | Portal+ParentShare ECS+RDS (+$158) |
| **Phase 3 (AI-Sensei)** | $376 | ~Â¥58,000 | AI-Sensei ECS+RDS (+$84) |

### ã‚³ã‚¹ãƒˆå‰Šæ¸›ç­–

**Phase 2/3ã§ã®ã‚³ã‚¹ãƒˆæœ€é©åŒ–**:
1. **ECS Fargateã‚¹ãƒãƒƒãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹**: æœ€å¤§70%å‰Šæ¸› (é–‹ç™ºç’°å¢ƒ)
2. **RDS Reserved Instances**: 1å¹´å¥‘ç´„ã§30%å‰Šæ¸›
3. **CloudFront PriceClasså¤‰æ›´**: ã‚¢ã‚¸ã‚¢é™å®šã§ã‚³ã‚¹ãƒˆå‰Šæ¸›
4. **Auto Scaling**: ä½è² è·æ™‚ã¯1ã‚¿ã‚¹ã‚¯ã«å‰Šæ¸›

**æœ€é©åŒ–å¾Œã®äºˆæƒ³ã‚³ã‚¹ãƒˆ (Phase 3)**:
- ECS Fargate Ã— 4ã‚¢ãƒ—ãƒª: $284/æœˆ â†’ $170/æœˆ (RI + Spot)
- RDS Ã— 4ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹: $52/æœˆ â†’ $36/æœˆ (RI)
- **æœ€é©åŒ–å¾Œ**: ç´„**$280/æœˆ** (~Â¥43,000)

---

## ğŸ¯ æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### å³åº§ã«å®Ÿæ–½ (Phase 0.6: ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å‰Šé™¤)

1. **Task Serviceåœæ­¢**:
   ```bash
   aws ecs update-service --cluster task-service-cluster --service task-service --desired-count 0
   ```

2. **Terraform destroy**:
   ```bash
   cd infrastructure/terraform
   terraform destroy -target=module.task_service
   terraform destroy -target=aws_db_instance.task_service_db
   terraform destroy -target=aws_cognito_user_pool.main
   terraform destroy -target=aws_apigatewayv2_api.main
   terraform destroy -target=aws_dynamodb_table.portal_*
   ```

3. **ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤**:
   ```bash
   rm -rf services/task-service/
   rm -rf services/ai-service/
   rm -rf laravel/app/Http/Actions/Api/Task/  # å¤ã„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ç”¨
   ```

4. **Laravelçµ±åˆ**:
   - `laravel/app/Http/Actions/Api/Task/StoreTaskApiAction.php` ä½œæˆ
   - æ—¢å­˜ `TaskManagementService` ã‚’DI

### 3ãƒ¶æœˆä»¥å†… (Phase 1: Mobile)

1. **Sanctum APIæ‹¡å¼µ**:
   ```bash
   cd laravel
   php artisan make:action Api/Task/StoreTaskApiAction
   ```

2. **React Nativeã‚¢ãƒ—ãƒªé–‹å§‹**:
   ```bash
   npx create-expo-app myteacher-mobile
   ```

3. **Firebaseçµ±åˆ**:
   ```bash
   npm install @react-native-firebase/app @react-native-firebase/messaging
   ```

ã“ã®æˆ¦ç•¥ã«ã‚ˆã‚Šã€**æ—¢å­˜AWS FargateåŸºç›¤ã‚’æœ€å¤§æ´»ç”¨**ã—ãªãŒã‚‰ã€**ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®è¤‡é›‘æ€§ã‚’æ’é™¤**ã—ã€**å€‹äººé–‹ç™ºè€…ãŒç®¡ç†å¯èƒ½ãªç¯„å›²**ã§ãƒãƒ«ãƒã‚¢ãƒ—ãƒªå±•é–‹ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚