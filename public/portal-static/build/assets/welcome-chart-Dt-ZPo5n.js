let i=null;const c={weekly:{labels:["月","火","水","木","金","土","日"],completed:[3,5,4,6,5,2,4],incomplete:[2,1,2,1,2,3,1],cumulative:[3,8,12,18,23,25,29],reward:[150,400,600,900,1150,1250,1450],stats:{completed:29,tokens:1450,rate:87}},monthly:{labels:["第1週","第2週","第3週","第4週"],completed:[18,22,20,19],incomplete:[7,5,6,8],cumulative:[18,40,60,79],reward:[900,2e3,3e3,3950],stats:{completed:79,tokens:3950,rate:83}},yearly:{labels:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],completed:[65,72,68,75,70,78,82,80,85,90,88,92],incomplete:[15,12,14,10,12,8,6,8,5,4,6,3],cumulative:[65,137,205,280,350,428,510,590,675,765,853,945],reward:[3250,6850,10250,14e3,17500,21400,25500,29500,33750,38250,42650,47250],stats:{completed:945,tokens:47250,rate:89}}};window.showChart=function(a){document.querySelectorAll(".chart-tab").forEach(e=>{e.classList.remove("active","text-[#59B9C6]","border-b-2","border-[#59B9C6]"),e.classList.add("text-gray-500","dark:text-gray-400")});const n=document.getElementById(`tab-${a}`);n.classList.add("active","text-[#59B9C6]","border-b-2","border-[#59B9C6]"),n.classList.remove("text-gray-500","dark:text-gray-400");const l=c[a].stats;document.getElementById("stat-completed").textContent=l.completed,document.getElementById("stat-tokens").textContent=l.tokens.toLocaleString(),document.getElementById("stat-rate").textContent=`${l.rate}%`;const o=c[a],d=document.documentElement.classList.contains("dark"),t=d?"#d1d5db":"#4b5563",s=d?"#374151":"#e5e7eb";i&&i.destroy();const b=document.getElementById("performanceChart").getContext("2d");i=new Chart(b,{type:"bar",data:{labels:o.labels,datasets:[{type:"bar",label:"完了",data:o.completed,backgroundColor:"rgba(147, 51, 234, 0.8)",borderColor:"rgb(147, 51, 234)",borderWidth:2,borderRadius:8,yAxisID:"y",order:2},{type:"bar",label:"未完了",data:o.incomplete,backgroundColor:"rgba(236, 72, 153, 0.8)",borderColor:"rgb(236, 72, 153)",borderWidth:2,borderRadius:8,yAxisID:"y",order:3},{type:"line",label:"累積完了",data:o.cumulative,borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.1)",borderWidth:3,pointBackgroundColor:"rgb(168, 85, 247)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7,tension:.4,fill:!1,yAxisID:"y",order:1},{type:"line",label:"報酬累計",data:o.reward,borderColor:"rgb(243, 156, 18)",backgroundColor:"rgba(243, 156, 18, 0.1)",borderWidth:3,pointBackgroundColor:"rgb(243, 156, 18)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7,tension:.4,fill:!1,yAxisID:"y-reward",order:1}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{color:t,font:{size:14,weight:"bold"},padding:20,usePointStyle:!0,pointStyle:"circle",boxWidth:12,boxHeight:12}},tooltip:{backgroundColor:d?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",titleColor:t,bodyColor:t,borderColor:s,borderWidth:1,padding:12,displayColors:!0,callbacks:{label:function(e){let r=e.dataset.label||"";return r&&(r+=": "),e.datasetIndex===3?r+=e.parsed.y.toLocaleString()+" pt":r+=e.parsed.y+" 件",r}}}},scales:{y:{type:"linear",display:!0,position:"left",beginAtZero:!0,title:{display:!0,text:"タスク数",color:t,font:{size:12,weight:"bold"}},ticks:{stepSize:1,precision:0,color:t,callback:function(e){return e+" 件"}},grid:{color:s,drawBorder:!1}},"y-reward":{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"報酬",color:"rgb(243, 156, 18)",font:{size:12,weight:"bold"}},ticks:{color:"rgb(243, 156, 18)",callback:function(e){return e.toLocaleString()+" pt"}},grid:{drawOnChartArea:!1}},x:{ticks:{color:t,font:{size:13,weight:"600"}},grid:{display:!1,drawBorder:!1}}}}})};document.addEventListener("DOMContentLoaded",function(){window.showChart("weekly")});
