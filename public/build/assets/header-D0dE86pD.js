class n{constructor(){this.header=null,this.notificationCount=0,this.notificationBadge=null,this.notificationBadgeText=null,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}init(){if(this.header=document.querySelector(".dashboard-header-blur"),!this.header){console.warn("[Header] Dashboard header not found");return}const t=this.header.dataset.notificationCount;this.notificationCount=t?parseInt(t,10):0;const i=this.header.querySelector(".notification-btn");i&&(this.notificationBadge=i.querySelector(".notification-badge"),this.notificationBadge&&(this.notificationBadgeText=this.notificationBadge)),console.log("[Header] Initialized:",{notificationBadge:!!this.notificationBadge,initialNotificationCount:this.notificationCount}),this.applyNotificationCount(),this.setupEventListeners()}setupEventListeners(){window.addEventListener("notification-count-updated",t=>{console.log("[Header] Notification count updated:",t.detail),this.notificationCount=t.detail.count,this.applyNotificationCount()})}applyNotificationCount(){if(!(!this.notificationBadge||!this.notificationBadgeText))if(this.notificationCount>0){this.notificationBadge.style.display="";const t=this.notificationCount>99?"99+":this.notificationCount;this.notificationBadgeText.textContent=t,console.log("[Header] Notification badge shown:",t)}else this.notificationBadge.style.display="none",console.log("[Header] Notification badge hidden")}}new n;
