# ã‚¿ã‚°æ©Ÿèƒ½ è¦ä»¶å®šç¾©æ›¸ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰

## æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | æ›´æ–°è€… | æ›´æ–°å†…å®¹ |
|------|--------|---------|
| 2025-12-07 | GitHub Copilot | åˆç‰ˆä½œæˆ: ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚¿ã‚°æ©Ÿèƒ½ã®è¦ä»¶å®šç¾© |

---

## 1. æ¦‚è¦

MyTeacher ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã«ãŠã‘ã‚‹ã‚¿ã‚°æ©Ÿèƒ½ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚¹ã‚¯ã‚’åˆ†é¡ãƒ»æ•´ç†ã—ã€åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã™ã€‚Webç‰ˆã¨ã®æ•´åˆæ€§ã‚’ä¿ã¡ã¤ã¤ã€ãƒ¢ãƒã‚¤ãƒ«UXã«æœ€é©åŒ–ã•ã‚ŒãŸUI/UXã‚’æä¾›ã—ã¾ã™ã€‚

### 1.1 æ©Ÿèƒ½ä¸€è¦§

1. **ã‚¿ã‚°ä¸€è¦§è¡¨ç¤ºæ©Ÿèƒ½** - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚°ã‚’ä¸€è¦§è¡¨ç¤ºï¼ˆã‚¿ã‚¹ã‚¯ä»¶æ•°ä»˜ãï¼‰
2. **ã‚¿ã‚°ä½œæˆæ©Ÿèƒ½** - æ–°è¦ã‚¿ã‚°ã®ä½œæˆï¼ˆã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆä»˜ãï¼‰
3. **ã‚¿ã‚°æ›´æ–°æ©Ÿèƒ½** - æ—¢å­˜ã‚¿ã‚°ã®åå‰å¤‰æ›´ï¼ˆã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆä»˜ãï¼‰
4. **ã‚¿ã‚°å‰Šé™¤æ©Ÿèƒ½** - ã‚¿ã‚°ã®å‰Šé™¤ï¼ˆã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆä»˜ãï¼‰
5. **ã‚¿ã‚°åˆ¥ãƒã‚±ãƒƒãƒˆè¡¨ç¤ºæ©Ÿèƒ½** - ã‚¿ã‚°ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ãŸã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
6. **ã‚¿ã‚¹ã‚¯ç´ä»˜ã‘æ©Ÿèƒ½** - ã‚¿ã‚¹ã‚¯ä½œæˆæ™‚ãƒ»ç·¨é›†æ™‚ã®ã‚¿ã‚°é¸æŠ

### 1.2 å¯¾å¿œãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | å®Ÿè£…çŠ¶æ³ | èªè¨¼æ–¹å¼ | ç”»é¢ |
|----------------|---------|---------|------|
| **Web** | âœ… å®Ÿè£…æ¸ˆã¿ | ã‚»ãƒƒã‚·ãƒ§ãƒ³ + CSRF | `resources/views/tags/modal-tags-list.blade.php` |
| **ãƒ¢ãƒã‚¤ãƒ«** | ğŸ¯ Phase 2.B-6å®Ÿè£…äºˆå®š | Sanctumï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ | `TagManagementScreen.tsx`, `TagBucketScreen.tsx` |

### 1.3 ã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ

ã‚¿ã‚°æ“ä½œæ™‚ã«ã¯ã€ä»¥ä¸‹ã®ã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã—ã¾ã™ï¼ˆ`config/const.php` L233-235, L289-291å‚ç…§ï¼‰ï¼š

| ã‚¤ãƒ™ãƒ³ãƒˆ | å€¤ | è¡¨æƒ… | ã‚·ãƒ¼ãƒ³ |
|---------|-----|------|--------|
| ã‚¿ã‚°ä½œæˆ | `tag_created` | happyï¼ˆå–œã³ï¼‰ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚°ã‚’ä½œæˆã—ãŸã¨ã |
| ã‚¿ã‚°æ›´æ–° | `tag_updated` | normalï¼ˆé€šå¸¸ï¼‰ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚°ã‚’æ›´æ–°ã—ãŸã¨ã |
| ã‚¿ã‚°å‰Šé™¤ | `tag_deleted` | sadï¼ˆæ‚²ã—ã¿ï¼‰ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚°ã‚’å‰Šé™¤ã—ãŸã¨ã |

**å®Ÿè£…æ–¹é‡**:
- Laravel APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«`avatar_event`ã‚­ãƒ¼ã‚’å«ã‚ã‚‹
- ãƒ¢ãƒã‚¤ãƒ«å´ã§AvatarContextã®`showAvatar(event)`ã‚’å‘¼ã³å‡ºã—
- 20ç§’é–“ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤ºå¾Œã€è‡ªå‹•çš„ã«éè¡¨ç¤º

---

## 2. ã‚¿ã‚°ä¸€è¦§è¡¨ç¤ºæ©Ÿèƒ½

### 2.1 æ©Ÿèƒ½è¦ä»¶

**æ¦‚è¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç´ã¥ãå…¨ã‚¿ã‚°ã‚’ä¸€è¦§è¡¨ç¤ºã—ã€å„ã‚¿ã‚°ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸã‚¿ã‚¹ã‚¯ä»¶æ•°ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã€‚

**ã‚¢ã‚¯ã‚»ã‚¹ãƒ«ãƒ¼ãƒˆ**:
- **Web**: `GET /tags/list` â†’ `TagsListAction`
- **ãƒ¢ãƒã‚¤ãƒ«**: `GET /api/tags` â†’ `TagsListApiAction`

**å‡ºåŠ›é …ç›®**:

| é …ç›® | å‹ | èª¬æ˜ |
|------|-----|------|
| `id` | integer | ã‚¿ã‚°ID |
| `name` | string | ã‚¿ã‚°å |
| `color` | string | ã‚¿ã‚°è‰²ï¼ˆHEXå½¢å¼ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: #3B82F6ï¼‰ |
| `tasks_count` | integer | é–¢é€£ã‚¿ã‚¹ã‚¯ä»¶æ•° |
| `created_at` | datetime | ä½œæˆæ—¥æ™‚ |
| `updated_at` | datetime | æ›´æ–°æ—¥æ™‚ |

**å‡¦ç†ãƒ•ãƒ­ãƒ¼ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰**:
```
1. Sanctumèªè¨¼ç¢ºèªï¼ˆauth:sanctumãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼‰
2. ã‚¿ã‚°ä¸€è¦§å–å¾—ï¼ˆTagService::getByUserIdï¼‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
   - ã‚¿ã‚¹ã‚¯ä»¶æ•°ã‚’å«ã‚ã‚‹ï¼ˆwithCount('tasks')ï¼‰
   - ä½œæˆæ—¥æ™‚é™é †ã§ã‚½ãƒ¼ãƒˆ
3. JSONå½¢å¼ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹
   {
     "success": true,
     "data": {
       "tags": [
         {
           "id": 1,
           "name": "æ•°å­¦",
           "color": "#3B82F6",
           "tasks_count": 5,
           "created_at": "2025-12-07T10:00:00+09:00",
           "updated_at": "2025-12-07T10:00:00+09:00"
         }
       ]
     }
   }
```

**ç”»é¢æ§‹æˆï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰**:
- **TagManagementScreen.tsx**:
  - ã‚¿ã‚°ä¸€è¦§ï¼ˆFlatListï¼‰
  - å„ã‚¿ã‚°ã‚«ãƒ¼ãƒ‰: ã‚¿ã‚°åã€è‰²ã€ã‚¿ã‚¹ã‚¯ä»¶æ•°ãƒãƒƒã‚¸ã€ç·¨é›†ãƒ»å‰Šé™¤ãƒœã‚¿ãƒ³
  - æ–°è¦ã‚¿ã‚°ä½œæˆãƒœã‚¿ãƒ³ï¼ˆFAB: Floating Action Buttonï¼‰
  - Pull-to-Refreshæ©Ÿèƒ½

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- æœªèªè¨¼: `401 Unauthorized` + `{"message": "Unauthenticated."}`
- ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼: `500 Internal Server Error` + ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

### 2.2 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

**tagsãƒ†ãƒ¼ãƒ–ãƒ«**:
```sql
CREATE TABLE tags (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL COMMENT 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ID',
    name VARCHAR(255) NOT NULL COMMENT 'ã‚¿ã‚°å',
    color VARCHAR(7) NULL COMMENT 'ã‚¿ã‚°è‰²ï¼ˆHEXå½¢å¼ï¼‰',
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_tags_user_id (user_id)
);
```

**task_tagï¼ˆä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰**:
```sql
CREATE TABLE task_tag (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    task_id BIGINT NOT NULL COMMENT 'ã‚¿ã‚¹ã‚¯ID',
    tag_id BIGINT NOT NULL COMMENT 'ã‚¿ã‚°ID',
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE,
    UNIQUE KEY unique_task_tag (task_id, tag_id),
    INDEX idx_task_tag_task_id (task_id),
    INDEX idx_task_tag_tag_id (tag_id)
);
```

---

## 3. ã‚¿ã‚°ä½œæˆæ©Ÿèƒ½

### 3.1 æ©Ÿèƒ½è¦ä»¶

**æ¦‚è¦**: æ–°è¦ã‚¿ã‚°ã‚’ä½œæˆã—ã€ã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆhappyï¼‰ã‚’ç™ºç«ã™ã‚‹æ©Ÿèƒ½ã€‚

**ã‚¢ã‚¯ã‚»ã‚¹ãƒ«ãƒ¼ãƒˆ**:
- **Web**: `POST /tags/store` â†’ `StoreTagAction`
- **ãƒ¢ãƒã‚¤ãƒ«**: `POST /api/tags` â†’ `StoreTagApiAction`

**å…¥åŠ›é …ç›®**:

| é …ç›® | å‹ | å¿…é ˆ | åˆ¶ç´„ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|------|-----|------|------|-----------|------|
| `name` | string | âœ“ | max:255 | - | ã‚¿ã‚°å |
| `color` | string | - | hex:7 | #3B82F6 | ã‚¿ã‚°è‰²ï¼ˆHEXå½¢å¼ï¼‰ |

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«**:
```php
'name'  => 'required|string|max:255',
'color' => 'nullable|string|regex:/^#[0-9A-Fa-f]{6}$/',
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
```
1. Sanctumèªè¨¼ç¢ºèª
2. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼ˆStoreTagApiRequestï¼‰
3. ã‚¿ã‚°ä½œæˆï¼ˆTagService::createTagï¼‰
   - user_id: èªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ID
   - color: æœªæŒ‡å®šã®å ´åˆã¯ #3B82F6
4. ã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ï¼ˆtag_createdï¼‰
5. JSONå½¢å¼ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹
   {
     "success": true,
     "message": "ã‚¿ã‚°ã‚’ä½œæˆã—ã¾ã—ãŸã€‚",
     "data": {
       "tag": { ... },
       "avatar_event": "tag_created"
     }
   }
```

**ç”»é¢æ§‹æˆï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰**:
- **TagCreateModal.tsx**ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰:
  - ã‚¿ã‚°åå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  - è‰²é¸æŠUIï¼ˆã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆï¼‰
  - ä¿å­˜ãƒœã‚¿ãƒ³
  - ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³
- ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ãŸå¾Œ:
  - ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤ºï¼ˆhappyè¡¨æƒ…ã€20ç§’ï¼‰
  - ã‚¿ã‚°ä¸€è¦§ç”»é¢ã«é·ç§»ï¼ˆãƒªã‚¹ãƒˆæ›´æ–°ï¼‰

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- ã‚¿ã‚°åæœªå…¥åŠ›: `ã‚¿ã‚°åã¯å¿…é ˆã§ã™ã€‚`
- ã‚¿ã‚°å255æ–‡å­—è¶…é: `ã‚¿ã‚°åã¯255æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚`
- è‰²å½¢å¼ä¸æ­£: `è‰²ã¯HEXå½¢å¼ï¼ˆä¾‹: #3B82F6ï¼‰ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚`

---

## 4. ã‚¿ã‚°æ›´æ–°æ©Ÿèƒ½

### 4.1 æ©Ÿèƒ½è¦ä»¶

**æ¦‚è¦**: æ—¢å­˜ã‚¿ã‚°ã®åå‰ãƒ»è‰²ã‚’å¤‰æ›´ã—ã€ã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆnormalï¼‰ã‚’ç™ºç«ã™ã‚‹æ©Ÿèƒ½ã€‚

**ã‚¢ã‚¯ã‚»ã‚¹ãƒ«ãƒ¼ãƒˆ**:
- **Web**: `PUT /tags/update/{id}` â†’ `UpdateTagAction`
- **ãƒ¢ãƒã‚¤ãƒ«**: `PUT /api/tags/{id}` â†’ `UpdateTagApiAction`

**å…¥åŠ›é …ç›®**:

| é …ç›® | å‹ | å¿…é ˆ | åˆ¶ç´„ | èª¬æ˜ |
|------|-----|------|------|------|
| `name` | string | âœ“ | max:255 | ã‚¿ã‚°å |
| `color` | string | - | hex:7 | ã‚¿ã‚°è‰²ï¼ˆHEXå½¢å¼ï¼‰ |

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
```
1. Sanctumèªè¨¼ç¢ºèª
2. ã‚¿ã‚°å–å¾—ï¼ˆæ¨©é™ç¢ºèª: user_id = èªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
3. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
4. ã‚¿ã‚°æ›´æ–°ï¼ˆTagService::updateTagï¼‰
5. ã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ï¼ˆtag_updatedï¼‰
6. JSONå½¢å¼ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```

**ç”»é¢æ§‹æˆï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰**:
- **TagEditModal.tsx**ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰:
  - ã‚¿ã‚°åå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆåˆæœŸå€¤: æ—¢å­˜ã‚¿ã‚°åï¼‰
  - è‰²é¸æŠUIï¼ˆåˆæœŸå€¤: æ—¢å­˜è‰²ï¼‰
  - ä¿å­˜ãƒœã‚¿ãƒ³
  - ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³
- ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ãŸå¾Œ:
  - ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤ºï¼ˆnormalè¡¨æƒ…ã€20ç§’ï¼‰
  - ã‚¿ã‚°ä¸€è¦§ç”»é¢ã®ãƒªã‚¹ãƒˆæ›´æ–°

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- ã‚¿ã‚°ãŒå­˜åœ¨ã—ãªã„: `404 Not Found` + `æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚`
- æ¨©é™ãªã—: `403 Forbidden` + `ã“ã®ã‚¿ã‚°ã‚’ç·¨é›†ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚`

---

## 5. ã‚¿ã‚°å‰Šé™¤æ©Ÿèƒ½

### 5.1 æ©Ÿèƒ½è¦ä»¶

**æ¦‚è¦**: æ—¢å­˜ã‚¿ã‚°ã‚’å‰Šé™¤ã—ã€ã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆsadï¼‰ã‚’ç™ºç«ã™ã‚‹æ©Ÿèƒ½ã€‚

**ã‚¢ã‚¯ã‚»ã‚¹ãƒ«ãƒ¼ãƒˆ**:
- **Web**: `DELETE /tags/update/{id}` â†’ `DestroyTagAction`
- **ãƒ¢ãƒã‚¤ãƒ«**: `DELETE /api/tags/{id}` â†’ `DestroyTagApiAction`

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
```
1. Sanctumèªè¨¼ç¢ºèª
2. ã‚¿ã‚°å–å¾—ï¼ˆæ¨©é™ç¢ºèª: user_id = èªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
3. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºï¼ˆãƒ¢ãƒã‚¤ãƒ«å´ï¼‰
   - ã€Œã“ã®ã‚¿ã‚°ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿé–¢é€£ã™ã‚‹ã‚¿ã‚¹ã‚¯ã®ç´ä»˜ã‘ã‚‚è§£é™¤ã•ã‚Œã¾ã™ã€‚ã€
4. ã‚¿ã‚°å‰Šé™¤ï¼ˆTagService::deleteTagï¼‰
   - CASCADEå‰Šé™¤: task_tagä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ã®é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚‚å‰Šé™¤
5. ã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ï¼ˆtag_deletedï¼‰
6. JSONå½¢å¼ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```

**ç”»é¢æ§‹æˆï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰**:
- ã‚¿ã‚°ä¸€è¦§ç”»é¢ã®å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—:
  - ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºï¼ˆAlert.alertï¼‰
  - ã€Œå‰Šé™¤ã€é¸æŠ â†’ APIå‘¼ã³å‡ºã—
  - ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤ºï¼ˆsadè¡¨æƒ…ã€20ç§’ï¼‰
  - ãƒªã‚¹ãƒˆæ›´æ–°ï¼ˆå‰Šé™¤ã•ã‚ŒãŸã‚¿ã‚°ã‚’é™¤å¤–ï¼‰

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- ã‚¿ã‚°ãŒå­˜åœ¨ã—ãªã„: `404 Not Found`
- æ¨©é™ãªã—: `403 Forbidden`
- é–¢é€£ã‚¿ã‚¹ã‚¯ã‚ã‚Šï¼ˆå‰Šé™¤ã¯å®Ÿè¡Œã€è­¦å‘Šã®ã¿ï¼‰: `é–¢é€£ã™ã‚‹ã‚¿ã‚¹ã‚¯ï¼ˆNä»¶ï¼‰ã®ç´ä»˜ã‘ãŒè§£é™¤ã•ã‚Œã¾ã—ãŸã€‚`

---

## 6. ã‚¿ã‚°åˆ¥ãƒã‚±ãƒƒãƒˆè¡¨ç¤ºæ©Ÿèƒ½

### 6.1 æ©Ÿèƒ½è¦ä»¶

**æ¦‚è¦**: ã‚¿ã‚¹ã‚¯ä¸€è¦§ç”»é¢ï¼ˆTaskListScreen.tsxï¼‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤ºå½¢å¼ã¨ã—ã¦ã€ã‚¿ã‚°ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ãŸã€Œãƒã‚±ãƒƒãƒˆè¡¨ç¤ºã€ã‚’å®Ÿè£…ã—ã¾ã™ã€‚Webç‰ˆã¨ã®æ•´åˆæ€§ã‚’ç¢ºä¿ã—ã€ã‚¿ã‚¹ã‚¯ã‚’ã‚¿ã‚°å˜ä½ã§ä¿¯ç°ã§ãã‚‹UIã‚’æä¾›ã—ã¾ã™ã€‚

**Webç‰ˆã¨ã®æ•´åˆæ€§**:
- Webç‰ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯ã‚¿ã‚°åˆ¥ãƒã‚±ãƒƒãƒˆè¡¨ç¤ºãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆ`resources/views/dashboard/partials/task-bento.blade.php`ï¼‰
- ãƒ¢ãƒã‚¤ãƒ«ç‰ˆã‚‚åŒæ§˜ã«ãƒã‚±ãƒƒãƒˆè¡¨ç¤ºã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã™ã‚‹ï¼ˆmobile-rules.mdç·å‰‡4é …: Webã‚¢ãƒ—ãƒªæ©Ÿèƒ½ã¨ã®æ•´åˆæ€§ï¼‰

**ç”»é¢é·ç§»ãƒ•ãƒ­ãƒ¼**:
```
[ã‚¿ã‚¹ã‚¯ä¸€è¦§ç”»é¢ï¼ˆãƒã‚±ãƒƒãƒˆè¡¨ç¤ºï¼‰]
   â†“ ãƒã‚±ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—
[ã‚¿ã‚°åˆ¥ã‚¿ã‚¹ã‚¯ä¸€è¦§ç”»é¢ï¼ˆTagTasksScreen.tsxï¼‰]
   â†“ ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—
[ã‚¿ã‚¹ã‚¯è©³ç´°ç”»é¢ï¼ˆTaskDetailScreen.tsxï¼‰]
```

**ãƒã‚±ãƒƒãƒˆè¡¨ç¤ºä»•æ§˜**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ·ï¸ æ•°å­¦                         (5) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¡ ä¸‰è§’é–¢æ•°ã®å…¬å¼ã‚’è¦šãˆã‚‹              â”‚
â”‚ â–¡ å¾®åˆ†ç©åˆ†ã®ç·´ç¿’å•é¡Œ                  â”‚
â”‚ â–¡ ç¢ºç‡ãƒ»çµ±è¨ˆã®å¾©ç¿’                    â”‚
â”‚ + ã‚ã¨2ä»¶                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ·ï¸ æœªåˆ†é¡                       (2) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¡ ã‚¿ã‚°ãªã—ã‚¿ã‚¹ã‚¯1                     â”‚
â”‚ â–¡ ã‚¿ã‚°ãªã—ã‚¿ã‚¹ã‚¯2                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒã‚±ãƒƒãƒˆã‚«ãƒ¼ãƒ‰UIä»•æ§˜ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰**:
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: ã‚·ãƒ³ã‚°ãƒ«ã‚«ãƒ©ãƒ ï¼ˆå…¨ã‚«ãƒ¼ãƒ‰åŒä¸€ã‚µã‚¤ã‚ºï¼‰
- **è¡¨ç¤ºè¦ç´ **:
  - ã‚¿ã‚°åï¼ˆå·¦ä¸Šï¼‰ã€ã‚¿ã‚¹ã‚¯ä»¶æ•°ãƒãƒƒã‚¸ï¼ˆå³ä¸Šï¼‰
  - ã‚¿ã‚¹ã‚¯ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆæœ€å¤§3ä»¶ã€ã‚¿ã‚¤ãƒˆãƒ«ã®ã¿ï¼‰
  - æ®‹ã‚Šã‚¿ã‚¹ã‚¯ä»¶æ•°è¡¨ç¤ºï¼ˆ4ä»¶ä»¥ä¸Šã®å ´åˆï¼‰
- **ä¸€æ‹¬æ“ä½œãƒœã‚¿ãƒ³**: å«ã‚ãªã„ï¼ˆã‚¿ãƒƒãƒ—ã§è©³ç´°ç”»é¢é·ç§»ï¼‰

### 6.2 ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—åŒ–

**APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
```
GET /api/v1/tasks  # æ—¢å­˜ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ç”¨
```

**ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ãƒ­ã‚¸ãƒƒã‚¯**ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ã€Webç‰ˆã¨åŒç­‰ï¼‰:
```typescript
// 1. å…¨ã‚¿ã‚¹ã‚¯å–å¾—
const tasks = await taskService.getTasks();

// 2. ã‚¿ã‚°åˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
const buckets = tasks.reduce((acc, task) => {
  if (task.tags && task.tags.length > 0) {
    // è¤‡æ•°ã‚¿ã‚°ã‚’æŒã¤ã‚¿ã‚¹ã‚¯ã¯å„ãƒã‚±ãƒƒãƒˆã«è¡¨ç¤º
    task.tags.forEach(tag => {
      if (!acc[tag.id]) {
        acc[tag.id] = { id: tag.id, name: tag.name, tasks: [] };
      }
      acc[tag.id].tasks.push(task);
    });
  } else {
    // ã‚¿ã‚°ãªã—ã‚¿ã‚¹ã‚¯ã¯ã€Œæœªåˆ†é¡ã€ãƒã‚±ãƒƒãƒˆ
    if (!acc[0]) {
      acc[0] = { id: 0, name: 'æœªåˆ†é¡', tasks: [] };
    }
    acc[0].tasks.push(task);
  }
  return acc;
}, {});

// 3. ã‚¿ã‚¹ã‚¯ä»¶æ•°é™é †ã§ã‚½ãƒ¼ãƒˆ
const sortedBuckets = Object.values(buckets)
  .sort((a, b) => b.tasks.length - a.tasks.length);
```

**æœªåˆ†é¡ãƒã‚±ãƒƒãƒˆ**:
- ã‚¿ã‚°ãŒç´ä»˜ã„ã¦ã„ãªã„ã‚¿ã‚¹ã‚¯ã‚’é›†ç´„
- ãƒã‚±ãƒƒãƒˆID: `0`
- ãƒã‚±ãƒƒãƒˆå: `"æœªåˆ†é¡"` ï¼ˆå­ã©ã‚‚ãƒ†ãƒ¼ãƒã§ã¯ `"ãã®ã»ã‹"`ï¼‰

### 6.3 ã‚¿ã‚°åˆ¥ã‚¿ã‚¹ã‚¯ä¸€è¦§ç”»é¢ï¼ˆTagTasksScreen.tsxï¼‰

**æ¦‚è¦**: ãƒã‚±ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨é·ç§»ã™ã‚‹ã€ã‚¿ã‚°ã«ç´ã¥ãã‚¿ã‚¹ã‚¯ã®ä¸€è¦§ç”»é¢ã€‚

**ç”»é¢æ§‹æˆ**:
- **ãƒ˜ãƒƒãƒ€ãƒ¼**: ã‚¿ã‚°åã€ã‚¿ã‚¹ã‚¯ä»¶æ•°ãƒãƒƒã‚¸ã€æˆ»ã‚‹ãƒœã‚¿ãƒ³
- **ã‚¿ã‚¹ã‚¯ä¸€è¦§**ï¼ˆFlatListï¼‰:
  - ç¾åœ¨ã®TaskListScreen.tsxã¨åŒç­‰ã®ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
  - å®Œäº†/æœªå®Œäº†ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹
  - ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒˆãƒ«ã€èª¬æ˜ï¼ˆ2è¡Œã¾ã§ï¼‰
  - ã‚¿ã‚°ãƒãƒƒã‚¸ï¼ˆè¤‡æ•°ã‚¿ã‚°å¯¾å¿œï¼‰
  - å ±é…¬è¡¨ç¤ºï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚¹ã‚¯ã®ã¿ï¼‰
  - æœŸé™è¡¨ç¤ºï¼ˆæœŸæ—¥ã‚ã‚Šã€æœŸé™åˆ‡ã‚Œå¼·èª¿ï¼‰
- **UIæ©Ÿèƒ½**:
  - Pull-to-Refresh
  - ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰ã‚¿ãƒƒãƒ— â†’ ã‚¿ã‚¹ã‚¯è©³ç´°ç”»é¢é·ç§»
  - å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚¿ãƒƒãƒ— â†’ å®Œäº†/æœªå®Œäº†åˆ‡ã‚Šæ›¿ãˆ

**ãƒ‡ãƒ¼ã‚¿å–å¾—**:
```typescript
// ãƒã‚±ãƒƒãƒˆã«å«ã¾ã‚Œã‚‹ã‚¿ã‚¹ã‚¯ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
const tagId = route.params.tagId;
const filteredTasks = tasks.filter(task => {
  if (tagId === 0) {
    // æœªåˆ†é¡ãƒã‚±ãƒƒãƒˆ: ã‚¿ã‚°ãªã—ã‚¿ã‚¹ã‚¯
    return !task.tags || task.tags.length === 0;
  } else {
    // ç‰¹å®šã‚¿ã‚°ãƒã‚±ãƒƒãƒˆ: ãã®ã‚¿ã‚°ã‚’æŒã¤ã‚¿ã‚¹ã‚¯
    return task.tags.some(tag => tag.id === tagId);
  }
});
```

**æ¤œç´¢æ©Ÿèƒ½ã¨ã®çµ±åˆ**:
- æ¤œç´¢å®Ÿè¡Œæ™‚: ãƒã‚±ãƒƒãƒˆè¡¨ç¤º â†’ ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºã«åˆ‡ã‚Šæ›¿ãˆ
- æ¤œç´¢ã‚¯ãƒªã‚¢æ™‚: ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰è¡¨ç¤º â†’ ãƒã‚±ãƒƒãƒˆè¡¨ç¤ºã«æˆ»ã™
- æ¤œç´¢çµæœã¯è©³ç´°è¡¨ç¤ºï¼ˆç¾åœ¨ã®å®Ÿè£…ã‚’ç¶­æŒï¼‰

---

## 7. ã‚¿ã‚¹ã‚¯ç´ä»˜ã‘æ©Ÿèƒ½

### 7.1 æ©Ÿèƒ½è¦ä»¶

**æ¦‚è¦**: ã‚¿ã‚¹ã‚¯ä½œæˆæ™‚ãƒ»ç·¨é›†æ™‚ã«ã‚¿ã‚°ã‚’é¸æŠã—ã€ã‚¿ã‚¹ã‚¯ã¨ã‚¿ã‚°ã‚’ç´ä»˜ã‘ã‚‹æ©Ÿèƒ½ã€‚

**å®Ÿè£…ç®‡æ‰€**:
1. **CreateTaskScreen.tsx** - ã‚¿ã‚¹ã‚¯ä½œæˆæ™‚ã®ã‚¿ã‚°é¸æŠ
2. **TaskEditScreen.tsx** - ã‚¿ã‚¹ã‚¯ç·¨é›†æ™‚ã®ã‚¿ã‚°è¿½åŠ ãƒ»å‰Šé™¤

**UIæ§‹æˆ**:
- ã‚¿ã‚°é¸æŠUIï¼ˆãƒãƒ«ãƒã‚»ãƒ¬ã‚¯ãƒˆï¼‰:
  - æ—¢å­˜ã‚¿ã‚°ä¸€è¦§ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼‰
  - æ–°è¦ã‚¿ã‚°ä½œæˆãƒœã‚¿ãƒ³ï¼ˆ+ æ–°ã—ã„ã‚¿ã‚°ï¼‰
  - é¸æŠä¸­ã‚¿ã‚°ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆãƒãƒƒã‚¸è¡¨ç¤ºï¼‰

**å‡¦ç†ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¿ã‚¹ã‚¯ä½œæˆæ™‚ï¼‰**:
```
1. ã‚¿ã‚°ä¸€è¦§å–å¾—ï¼ˆGET /api/tagsï¼‰
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚°é¸æŠï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰
3. ã‚¿ã‚¹ã‚¯ä½œæˆAPIå‘¼ã³å‡ºã—ï¼ˆPOST /api/v1/tasksï¼‰
   - body: { title, description, tags: [1, 2, 3] }
4. Laravelå´ã§ã‚¿ã‚°ç´ä»˜ã‘ï¼ˆTaskTagService::syncTagsï¼‰
5. æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¿ã‚¹ã‚¯ç·¨é›†æ™‚ï¼‰**:
```
1. ã‚¿ã‚¹ã‚¯è©³ç´°å–å¾—ï¼ˆæ—¢å­˜ã‚¿ã‚°IDã‚’å–å¾—ï¼‰
2. ã‚¿ã‚°ä¸€è¦§å–å¾—ï¼ˆé¸æŠçŠ¶æ…‹ã‚’å¾©å…ƒï¼‰
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚°è¿½åŠ ãƒ»å‰Šé™¤
4. ã‚¿ã‚¹ã‚¯æ›´æ–°APIå‘¼ã³å‡ºã—ï¼ˆPUT /api/v1/tasks/{id}ï¼‰
   - body: { tags: [1, 2, 4] }
5. Laravelå´ã§ã‚¿ã‚°åŒæœŸï¼ˆsyncTags: è¿½åŠ ãƒ»å‰Šé™¤ã‚’è‡ªå‹•å‡¦ç†ï¼‰
6. æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹
```

**æ–°è¦ã‚¿ã‚°ä½œæˆãƒ•ãƒ­ãƒ¼**:
```
1. ã€Œ+ æ–°ã—ã„ã‚¿ã‚°ã€ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—
2. TagCreateModalã‚’è¡¨ç¤º
3. ã‚¿ã‚°ä½œæˆAPIå‘¼ã³å‡ºã—ï¼ˆPOST /api/tagsï¼‰
4. ä½œæˆã•ã‚ŒãŸã‚¿ã‚°ã‚’è‡ªå‹•é¸æŠ
5. ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤ºï¼ˆtag_createdï¼‰
```

**æ—¢å­˜å®Ÿè£…ã¨ã®æ•´åˆæ€§**:
- TaskEditScreen.tsxï¼ˆæ—¢å­˜ï¼‰: ã‚¿ã‚°é¸æŠUIã‚’è¿½åŠ 
  - æ—¢å­˜ã®æœŸé™å…¥åŠ›ã€å„ªå…ˆåº¦é¸æŠã¨åŒã˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«é…ç½®
- useTasks Hookï¼ˆæ—¢å­˜ï¼‰: `tags`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
  - `createTask(data: { tags?: number[] })`
  - `updateTask(id, data: { tags?: number[] })`

---

## 8. æŠ€è¡“ä»•æ§˜

### 8.1 APIä¸€è¦§

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èªè¨¼ | èª¬æ˜ |
|--------------|---------|------|------|
| `/api/tags` | GET | Sanctum | ã‚¿ã‚°ä¸€è¦§å–å¾— |
| `/api/tags` | POST | Sanctum | ã‚¿ã‚°ä½œæˆ |
| `/api/tags/{id}` | PUT | Sanctum | ã‚¿ã‚°æ›´æ–° |
| `/api/tags/{id}` | DELETE | Sanctum | ã‚¿ã‚°å‰Šé™¤ |
| `/api/tags/{id}/tasks` | GET | Sanctum | ã‚¿ã‚°åˆ¥ã‚¿ã‚¹ã‚¯ä¸€è¦§ |

### 8.2 ãƒ¢ãƒã‚¤ãƒ«å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

**Serviceå±¤**:
- `mobile/src/services/tag.service.ts` - APIé€šä¿¡ãƒ­ã‚¸ãƒƒã‚¯
  - `getTags(): Promise<Tag[]>`
  - `createTag(data: CreateTagData): Promise<Tag>`
  - `updateTag(id: number, data: UpdateTagData): Promise<Tag>`
  - `deleteTag(id: number): Promise<void>`
  - `getTagTasks(tagId: number): Promise<Task[]>`

**Hookå±¤**:
- `mobile/src/hooks/useTags.ts` - ReactçŠ¶æ…‹ç®¡ç†
  - `tags: Tag[]` - ã‚¿ã‚°ä¸€è¦§
  - `isLoading: boolean` - ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
  - `error: string | null` - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  - `createTag(data: CreateTagData): Promise<void>`
  - `updateTag(id: number, data: UpdateTagData): Promise<void>`
  - `deleteTag(id: number): Promise<void>`
  - `refreshTags(): Promise<void>`

**ç”»é¢å±¤**:
- `mobile/src/screens/tags/TagManagementScreen.tsx` - ã‚¿ã‚°ä¸€è¦§ç”»é¢
- `mobile/src/screens/tags/TagBucketScreen.tsx` - ã‚¿ã‚°åˆ¥ãƒã‚±ãƒƒãƒˆè¡¨ç¤º
- `mobile/src/components/tags/TagCreateModal.tsx` - ã‚¿ã‚°ä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ«
- `mobile/src/components/tags/TagEditModal.tsx` - ã‚¿ã‚°ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
- `mobile/src/components/tags/TagCard.tsx` - ã‚¿ã‚°ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**å‹å®šç¾©**:
```typescript
// mobile/src/types/tag.types.ts
export interface Tag {
  id: number;
  name: string;
  color: string;
  tasks_count: number;
  created_at: string;
  updated_at: string;
}

export interface CreateTagData {
  name: string;
  color?: string;
}

export interface UpdateTagData {
  name: string;
  color?: string;
}

export interface TagStatistics {
  total: number;
  completed: number;
  incomplete: number;
}
```

### 8.3 ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤ºçµ±åˆ

**AvatarContextçµ±åˆ**:
```typescript
// ã‚¿ã‚°ä½œæˆAPIæˆåŠŸå¾Œ
const response = await tagService.createTag(data);
if (response.data.avatar_event) {
  showAvatar(response.data.avatar_event); // 'tag_created'
}
```

**è¡¨ç¤ºè¨­å®š**:
- ã‚¤ãƒ™ãƒ³ãƒˆ: `config('const.avatar_events.tag_created')` â†’ `'tag_created'`
- è¡¨æƒ…: `config('const.avatar_event_expression_types.tag_created')` â†’ `'happy'`
- è¡¨ç¤ºæ™‚é–“: 20ç§’ï¼ˆè‡ªå‹•éè¡¨ç¤ºï¼‰
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: `avatar-nod`ï¼ˆã†ãªãšãï¼‰

---

## 9. ãƒ†ã‚¹ãƒˆè¦ä»¶

### 9.1 Laravelãƒ†ã‚¹ãƒˆ

**TagApiTest.php**ï¼ˆFeature Testï¼‰:
- âœ… ã‚¿ã‚°ä¸€è¦§å–å¾—æˆåŠŸ
- âœ… ã‚¿ã‚°ä½œæˆæˆåŠŸï¼ˆavatar_eventæ¤œè¨¼ï¼‰
- âœ… ã‚¿ã‚°æ›´æ–°æˆåŠŸï¼ˆavatar_eventæ¤œè¨¼ï¼‰
- âœ… ã‚¿ã‚°å‰Šé™¤æˆåŠŸï¼ˆavatar_eventæ¤œè¨¼ï¼‰
- âœ… æœªèªè¨¼æ™‚ã¯401ã‚¨ãƒ©ãƒ¼
- âœ… ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚°ã¯ç·¨é›†ãƒ»å‰Šé™¤ä¸å¯ï¼ˆ403ã‚¨ãƒ©ãƒ¼ï¼‰
- âœ… ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼ˆã‚¿ã‚°åæœªå…¥åŠ›ã€255æ–‡å­—è¶…éï¼‰

### 9.2 ãƒ¢ãƒã‚¤ãƒ«ãƒ†ã‚¹ãƒˆ

**tag.service.test.ts**ï¼ˆServiceå±¤ï¼‰:
- âœ… getTags()æˆåŠŸ
- âœ… createTag()æˆåŠŸï¼ˆavatar_eventå—ä¿¡ï¼‰
- âœ… updateTag()æˆåŠŸï¼ˆavatar_eventå—ä¿¡ï¼‰
- âœ… deleteTag()æˆåŠŸï¼ˆavatar_eventå—ä¿¡ï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆ401, 403, 500ï¼‰

**useTags.test.ts**ï¼ˆHookå±¤ï¼‰:
- âœ… ã‚¿ã‚°ä¸€è¦§å–å¾—æˆåŠŸ
- âœ… ã‚¿ã‚°ä½œæˆæˆåŠŸï¼ˆã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤ºå‘¼ã³å‡ºã—ï¼‰
- âœ… ã‚¿ã‚°æ›´æ–°æˆåŠŸï¼ˆã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤ºå‘¼ã³å‡ºã—ï¼‰
- âœ… ã‚¿ã‚°å‰Šé™¤æˆåŠŸï¼ˆã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤ºå‘¼ã³å‡ºã—ï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ç®¡ç†

**TagManagementScreen.test.tsx**ï¼ˆUIå±¤ï¼‰:
- âœ… ã‚¿ã‚°ä¸€è¦§è¡¨ç¤º
- âœ… æ–°è¦ä½œæˆãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ— â†’ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
- âœ… ç·¨é›†ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ— â†’ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
- âœ… å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ— â†’ ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
- âœ… Pull-to-Refreshå‹•ä½œ

---

## 10. åˆ¶ç´„äº‹é …ãƒ»æ³¨æ„äº‹é …

### 10.1 Webç‰ˆã¨ã®ç›¸é•ç‚¹

**ç›¸é•ç‚¹ãªã—**: ãƒ¢ãƒã‚¤ãƒ«ç‰ˆã¯Webç‰ˆã®å®Œå…¨äº’æ›ã‚’ç›®æŒ‡ã™ã€‚

### 10.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®

- ã‚¿ã‚°ä¸€è¦§: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ï¼ˆAsyncStorageã€5åˆ†TTLï¼‰
- ã‚¿ã‚¹ã‚¯ä»¶æ•°: DBå´ã§withCount()ä½¿ç”¨ï¼ˆN+1å•é¡Œå›é¿ï¼‰

### 10.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- Sanctumãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼å¿…é ˆ
- ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚°ç·¨é›†ãƒ»å‰Šé™¤ã‚’é˜²æ­¢ï¼ˆLaravelå´ã§user_idæ¤œè¨¼ï¼‰

---

## 11. å‚è€ƒè³‡æ–™

- **Webç‰ˆå®Ÿè£…**: `app/Http/Actions/Tags/`, `resources/views/tags/`
- **ã‚¢ãƒã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š**: `config/const.php` L217-300
- **APIä»•æ§˜**: `routes/api.php` L175-180
- **é–‹ç™ºè¦å‰‡**: `docs/mobile/mobile-rules.md`
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦ç´„**: `.github/copilot-instructions.md`
