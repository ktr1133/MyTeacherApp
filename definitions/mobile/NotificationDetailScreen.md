# é€šçŸ¥è©³ç´°ç”»é¢ è¦ä»¶å®šç¾©æ›¸

## æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | æ›´æ–°è€… | æ›´æ–°å†…å®¹ |
|------|--------|---------|
| 2025-12-07 | GitHub Copilot | åˆç‰ˆä½œæˆ: Phase 2.B-5 Step 2 å®Œäº†å¾Œã®å®Ÿè£…å†…å®¹ã‚’è¦ä»¶åŒ– |

---

## 1. æ¦‚è¦

MyTeacherãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®é€šçŸ¥è©³ç´°ç”»é¢ï¼ˆNotificationDetailScreenï¼‰ã®æ©Ÿèƒ½è¦ä»¶ã‚’å®šç¾©ã—ã¾ã™ã€‚æœ¬ç”»é¢ã¯é€šçŸ¥ã®è©³ç´°æƒ…å ±è¡¨ç¤ºã€è‡ªå‹•æ—¢èª­åŒ–ã€ã‚¿ã‚¹ã‚¯é–¢é€£æƒ…å ±ã®è¡¨ç¤ºã‚’æä¾›ã—ã¾ã™ã€‚

### 1.1 å¯¾å¿œãƒ•ã‚§ãƒ¼ã‚º

- **Phase 2.B-5 Step 2**: é€šçŸ¥æ©Ÿèƒ½åŸºæœ¬å®Ÿè£…ï¼ˆ2025-12-07å®Œäº†ï¼‰

### 1.2 é–¢é€£ç”»é¢

- **Webã‚¢ãƒ—ãƒª**: é€šçŸ¥è©³ç´°ï¼ˆ`resources/views/notifications/show.blade.php`ï¼‰
- **ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª**: NotificationListScreenã€NotificationDetailScreen

---

## 2. ç”»é¢ä»•æ§˜

### 2.1 ç”»é¢æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ˜ãƒƒãƒ€ãƒ¼                             â”‚
â”‚ [<] é€šçŸ¥è©³ç´°                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€šçŸ¥è©³ç´°ã‚«ãƒ¼ãƒ‰                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ ã‚«ãƒ†ã‚´ãƒªãƒãƒƒã‚¸   å„ªå…ˆåº¦ãƒãƒƒã‚¸â”‚     â”‚
â”‚ â”‚                             â”‚     â”‚
â”‚ â”‚ [ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆå¤ªå­—ãƒ»å¤§ãã‚ï¼‰]   â”‚     â”‚
â”‚ â”‚                             â”‚     â”‚
â”‚ â”‚ [ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡ï¼ˆè¤‡æ•°è¡Œï¼‰]   â”‚     â”‚
â”‚ â”‚ ï¼ˆã‚¿ã‚¹ã‚¯åã€æ‰¿èªè€…ã€        â”‚     â”‚
â”‚ â”‚  ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±ãªã©ï¼‰         â”‚     â”‚
â”‚ â”‚                             â”‚     â”‚
â”‚ â”‚ ä½œæˆæ—¥æ™‚: 2025/12/07 14:30  â”‚     â”‚
â”‚ â”‚ æ—¢èª­æ—¥æ™‚: 2025/12/07 15:00  â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                     â”‚
â”‚ ã‚¿ã‚¹ã‚¯é–¢é€£æƒ…å ±ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ é–¢é€£ã‚¿ã‚¹ã‚¯                   â”‚     â”‚
â”‚ â”‚ [ã‚¿ã‚¹ã‚¯å]                   â”‚     â”‚
â”‚ â”‚ [ã‚¿ã‚¹ã‚¯ã‚’è¦‹ã‚‹] ãƒœã‚¿ãƒ³        â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 è¡¨ç¤ºè¦ç´ 

#### 2.2.1 ãƒ˜ãƒƒãƒ€ãƒ¼

| è¦ç´  | ä»•æ§˜ |
|------|------|
| æˆ»ã‚‹ãƒœã‚¿ãƒ³ | `[<]` ã‚¿ãƒƒãƒ—ã§é€šçŸ¥ä¸€è¦§ç”»é¢ã«æˆ»ã‚‹ |
| ã‚¿ã‚¤ãƒˆãƒ« | ãƒ†ãƒ¼ãƒåˆ¥: ã€ŒãŠã—ã‚‰ã›ã®ãã‚ã—ã„ã“ã¨ã€ï¼ˆå­ã©ã‚‚ï¼‰/ ã€Œé€šçŸ¥è©³ç´°ã€ï¼ˆå¤§äººï¼‰ |

#### 2.2.2 é€šçŸ¥è©³ç´°ã‚«ãƒ¼ãƒ‰

| è¦ç´  | ä»•æ§˜ | è¡¨ç¤ºæ¡ä»¶ |
|------|------|---------|
| ã‚«ãƒ†ã‚´ãƒªãƒãƒƒã‚¸ | ã‚¿ã‚¹ã‚¯ / ã‚°ãƒ«ãƒ¼ãƒ— / ãƒˆãƒ¼ã‚¯ãƒ³ / ã‚·ã‚¹ãƒ†ãƒ  | å¿…é ˆ |
| å„ªå…ˆåº¦ãƒãƒƒã‚¸ | Hï¼ˆèµ¤ï¼‰/ Mï¼ˆé»„ï¼‰/ Lï¼ˆç°ï¼‰ | å¿…é ˆ |
| ã‚¿ã‚¤ãƒˆãƒ« | é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆè¤‡æ•°è¡Œå¯¾å¿œã€å¤ªå­—ã€18ptï¼‰ | å¿…é ˆ |
| ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡ | é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆè¤‡æ•°è¡Œã€14ptï¼‰ | å¿…é ˆ |
| ä½œæˆæ—¥æ™‚ | ã€Œä½œæˆ: 2025/12/07 14:30ã€å½¢å¼ | å¿…é ˆ |
| æ—¢èª­æ—¥æ™‚ | ã€Œæ—¢èª­: 2025/12/07 15:00ã€å½¢å¼ | æ—¢èª­ã®å ´åˆã®ã¿è¡¨ç¤º |

#### 2.2.3 ã‚¿ã‚¹ã‚¯é–¢é€£æƒ…å ±ï¼ˆè©²å½“ã™ã‚‹å ´åˆã®ã¿ï¼‰

| è¦ç´  | ä»•æ§˜ | è¡¨ç¤ºæ¡ä»¶ |
|------|------|---------|
| ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ« | ã€Œé–¢é€£ã‚¿ã‚¹ã‚¯ã€ | `related_task_id`ãŒå­˜åœ¨ã™ã‚‹å ´åˆ |
| ã‚¿ã‚¹ã‚¯å | é–¢é€£ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ« | å¿…é ˆ |
| ã‚¿ã‚¹ã‚¯è©³ç´°ãƒœã‚¿ãƒ³ | ã€Œã‚¿ã‚¹ã‚¯ã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ | å¿…é ˆ |

### 2.3 ãƒ‡ãƒ¼ã‚¿å–å¾—ä»•æ§˜

#### 2.3.1 APIä»•æ§˜

| é …ç›® | ä»•æ§˜ |
|------|------|
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | `GET /api/notifications/{id}` |
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | `id`ï¼ˆé€šçŸ¥IDï¼‰ |
| èªè¨¼æ–¹å¼ | Sanctumï¼ˆãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼ï¼‰ |
| ãƒ¬ã‚¹ãƒãƒ³ã‚¹ | `{notification: {...}, related_task: {...}}` |

#### 2.3.2 å–å¾—ãƒ‡ãƒ¼ã‚¿é …ç›®

| é …ç›® | å‹ | èª¬æ˜ |
|------|-----|------|
| id | number | é€šçŸ¥ID |
| title | string | é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ« |
| message | string | é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæœ¬æ–‡ï¼‰ |
| category | 'task' \| 'group' \| 'token' \| 'system' | ã‚«ãƒ†ã‚´ãƒª |
| priority | 1 \| 2 \| 3 | å„ªå…ˆåº¦ï¼ˆ1=é«˜ã€2=ä¸­ã€3=ä½ï¼‰ |
| is_read | boolean | æ—¢èª­ãƒ•ãƒ©ã‚° |
| created_at | string | ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰ |
| read_at | string \| null | æ—¢èª­æ—¥æ™‚ï¼ˆISO 8601ï¼‰ |
| related_task_id | number \| null | é–¢é€£ã‚¿ã‚¹ã‚¯ID |
| related_task | object \| null | é–¢é€£ã‚¿ã‚¹ã‚¯æƒ…å ± |

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "success": true,
  "data": {
    "notification": {
      "id": 1,
      "title": "ã‚¿ã‚¹ã‚¯ãŒæ‰¿èªã•ã‚Œã¾ã—ãŸ",
      "message": "ã€Œå®¿é¡Œã‚’ã™ã‚‹ã€ãŒæ‰¿èªã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã§å–ã‚Šçµ„ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼",
      "category": "task",
      "priority": 2,
      "is_read": true,
      "created_at": "2025-12-07T14:30:00+09:00",
      "read_at": "2025-12-07T15:00:00+09:00",
      "related_task_id": 123
    },
    "related_task": {
      "id": 123,
      "title": "å®¿é¡Œã‚’ã™ã‚‹",
      "status": "approved",
      "reward": 50
    }
  }
}
```

---

## 3. æ©Ÿèƒ½è¦ä»¶

### 3.1 é€šçŸ¥è©³ç´°è¡¨ç¤º

#### 3.1.1 è¡¨ç¤ºä»•æ§˜

- **ã‚¿ã‚¤ãƒˆãƒ«**: å¤ªå­—ã€18ptã€è¤‡æ•°è¡Œå¯¾å¿œ
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: é€šå¸¸ã€14ptã€è¤‡æ•°è¡Œå¯¾å¿œ
- **æ—¥æ™‚è¡¨ç¤º**: ä½œæˆæ—¥æ™‚ãƒ»æ—¢èª­æ—¥æ™‚ã‚’æ—¥æœ¬èªå½¢å¼ã§è¡¨ç¤º

#### 3.1.2 ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹

| ã‚«ãƒ†ã‚´ãƒª | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹ |
|---------|-------------|
| ã‚¿ã‚¹ã‚¯ | ã€Œã€å®¿é¡Œã‚’ã™ã‚‹ã€ãŒæ‰¿èªã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã§å–ã‚Šçµ„ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼ã€ |
| ã‚°ãƒ«ãƒ¼ãƒ— | ã€Œã‚°ãƒ«ãƒ¼ãƒ—ã€å®¶æ—ã€ã«æ‹›å¾…ã•ã‚Œã¾ã—ãŸã€‚ã€ |
| ãƒˆãƒ¼ã‚¯ãƒ³ | ã€Œ100ãƒˆãƒ¼ã‚¯ãƒ³ãŒä»˜ä¸ã•ã‚Œã¾ã—ãŸã€‚ã€ |
| ã‚·ã‚¹ãƒ†ãƒ  | ã€Œãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®ãŠçŸ¥ã‚‰ã›: 12/10 23:00ã€œ24:00ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿæ–½ã—ã¾ã™ã€‚ã€ |

### 3.2 è‡ªå‹•æ—¢èª­åŒ–

#### 3.2.1 æ—¢èª­åŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°

| ã‚¿ã‚¤ãƒŸãƒ³ã‚° | å‡¦ç† |
|-----------|------|
| ç”»é¢é·ç§»æ™‚ | NotificationListScreenã‹ã‚‰é·ç§»æ™‚ã«æ—¢èª­åŒ–æ¸ˆã¿ |
| ç”»é¢è¡¨ç¤ºæ™‚ | æ—¢èª­åŒ–ä¸è¦ï¼ˆé·ç§»å‰ã«å®Ÿæ–½æ¸ˆã¿ï¼‰ |

#### 3.2.2 æ—¢èª­çŠ¶æ…‹ã®è¡¨ç¤º

- **æ—¢èª­æ—¥æ™‚ãŒå­˜åœ¨ã™ã‚‹å ´åˆ**: ã€Œæ—¢èª­: 2025/12/07 15:00ã€ã‚’è¡¨ç¤º
- **æ—¢èª­æ—¥æ™‚ãŒnullã®å ´åˆ**: æ—¢èª­æ—¥æ™‚ã®è¡¨ç¤ºãªã—

### 3.3 ã‚¿ã‚¹ã‚¯é–¢é€£æƒ…å ±è¡¨ç¤º

#### 3.3.1 è¡¨ç¤ºæ¡ä»¶

- **æ¡ä»¶**: `related_task_id` ãŒå­˜åœ¨ã—ã€`category` ãŒ `'task'` ã®å ´åˆ
- **å–å¾—æ–¹æ³•**: é€šçŸ¥è©³ç´°APIï¼ˆ`GET /api/notifications/{id}`ï¼‰ã§ä¸€ç·’ã«å–å¾—

#### 3.3.2 ã‚¿ã‚¹ã‚¯è©³ç´°é·ç§»

| é …ç›® | ä»•æ§˜ |
|------|------|
| ãƒˆãƒªã‚¬ãƒ¼ | ã€Œã‚¿ã‚¹ã‚¯ã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ— |
| é·ç§»å…ˆ | TaskDetailScreen |
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | `{id: related_task_id}` |
| ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ | Stack Navigator |

### 3.4 æˆ»ã‚‹ãƒœã‚¿ãƒ³

| é …ç›® | ä»•æ§˜ |
|------|------|
| ãƒˆãƒªã‚¬ãƒ¼ | ãƒ˜ãƒƒãƒ€ãƒ¼ã® `[<]` ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ— |
| é·ç§»å…ˆ | NotificationListScreenï¼ˆã‚¹ã‚¿ãƒƒã‚¯ã®popï¼‰ |
| æŒ™å‹• | é€šçŸ¥ä¸€è¦§ã«æˆ»ã‚‹ï¼ˆé€šçŸ¥ä¸€è¦§ã¯è‡ªå‹•æ›´æ–°ï¼‰ |

---

## 4. UI/UXã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### 4.1 ãƒ†ãƒ¼ãƒå¯¾å¿œ

#### 4.1.1 å­ã©ã‚‚ãƒ†ãƒ¼ãƒ

| è¦ç´  | ä»•æ§˜ |
|------|------|
| ã‚¿ã‚¤ãƒˆãƒ« | ã€ŒãŠã—ã‚‰ã›ã®ãã‚ã—ã„ã“ã¨ã€ |
| ä½œæˆæ—¥æ™‚ãƒ©ãƒ™ãƒ« | ã€Œã¤ãã£ãŸã¨ãã€ |
| æ—¢èª­æ—¥æ™‚ãƒ©ãƒ™ãƒ« | ã€Œã‚ˆã‚“ã ã¨ãã€ |
| é–¢é€£ã‚¿ã‚¹ã‚¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ã€Œã‹ã‚“ã‚Œã‚“ã™ã‚‹ã‚„ã‚‹ã“ã¨ã€ |
| ã‚¿ã‚¹ã‚¯è©³ç´°ãƒœã‚¿ãƒ³ | ã€Œã‚„ã‚‹ã“ã¨ã‚’ã¿ã‚‹ã€ |
| ã‚«ãƒ†ã‚´ãƒª | ã‚¿ã‚¹ã‚¯ â†’ ã€Œã‚„ã‚‹ã“ã¨ã€ã€ã‚°ãƒ«ãƒ¼ãƒ— â†’ ã€Œãªã‹ã¾ã€ |

#### 4.1.2 å¤§äººãƒ†ãƒ¼ãƒ

| è¦ç´  | ä»•æ§˜ |
|------|------|
| ã‚¿ã‚¤ãƒˆãƒ« | ã€Œé€šçŸ¥è©³ç´°ã€ |
| ä½œæˆæ—¥æ™‚ãƒ©ãƒ™ãƒ« | ã€Œä½œæˆã€ |
| æ—¢èª­æ—¥æ™‚ãƒ©ãƒ™ãƒ« | ã€Œæ—¢èª­ã€ |
| é–¢é€£ã‚¿ã‚¹ã‚¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ã€Œé–¢é€£ã‚¿ã‚¹ã‚¯ã€ |
| ã‚¿ã‚¹ã‚¯è©³ç´°ãƒœã‚¿ãƒ³ | ã€Œã‚¿ã‚¹ã‚¯ã‚’è¦‹ã‚‹ã€ |
| ã‚«ãƒ†ã‚´ãƒª | ã‚¿ã‚¹ã‚¯ / ã‚°ãƒ«ãƒ¼ãƒ— / ãƒˆãƒ¼ã‚¯ãƒ³ / ã‚·ã‚¹ãƒ†ãƒ  |

### 4.2 ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒãƒƒã‚¸ãƒ‡ã‚¶ã‚¤ãƒ³

| ã‚«ãƒ†ã‚´ãƒª | èƒŒæ™¯è‰² | ãƒ†ã‚­ã‚¹ãƒˆ | ã‚¢ã‚¤ã‚³ãƒ³ |
|---------|--------|---------|---------|
| ã‚¿ã‚¹ã‚¯ | é’è‰²ï¼ˆ#2196F3ï¼‰ | ç™½ | ğŸ“‹ |
| ã‚°ãƒ«ãƒ¼ãƒ— | ç·‘è‰²ï¼ˆ#4CAF50ï¼‰ | ç™½ | ğŸ‘¥ |
| ãƒˆãƒ¼ã‚¯ãƒ³ | ã‚ªãƒ¬ãƒ³ã‚¸è‰²ï¼ˆ#FF9800ï¼‰ | ç™½ | ğŸ’° |
| ã‚·ã‚¹ãƒ†ãƒ  | ç°è‰²ï¼ˆ#9E9E9Eï¼‰ | ç™½ | âš™ï¸ |

### 4.3 å„ªå…ˆåº¦åˆ¥ãƒãƒƒã‚¸ãƒ‡ã‚¶ã‚¤ãƒ³

| å„ªå…ˆåº¦ | å€¤ | èƒŒæ™¯è‰² | ãƒ†ã‚­ã‚¹ãƒˆ | è¡¨ç¤º |
|-------|-----|--------|---------|------|
| é«˜ | 1 | èµ¤è‰²ï¼ˆ#F44336ï¼‰ | ç™½ | H |
| ä¸­ | 2 | é»„è‰²ï¼ˆ#FFC107ï¼‰ | é»’ | M |
| ä½ | 3 | ç°è‰²ï¼ˆ#9E9E9Eï¼‰ | ç™½ | L |

### 4.4 ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

- **ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé•·ã„å ´åˆã¯ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½
- **ã‚¿ãƒƒãƒ—é ˜åŸŸ**: ã€Œã‚¿ã‚¹ã‚¯ã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã¯æœ€å°44x44pt
- **ã‚«ãƒ¼ãƒ‰ã®ä½™ç™½**: 16ptï¼ˆå·¦å³ä¸Šä¸‹ï¼‰

---

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒå¯¾å¿œ

### 5.1 ä½¿ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«

#### 5.1.1 notification_templatesãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | ä½¿ç”¨ç®‡æ‰€ |
|---------|-----|------|---------|
| id | integer | é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆID | ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| title | string | é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ« | è©³ç´°ç”»é¢ã‚¿ã‚¤ãƒˆãƒ« |
| message | text | é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | è©³ç´°ç”»é¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
| category | enum | ã‚«ãƒ†ã‚´ãƒª | ãƒãƒƒã‚¸è¡¨ç¤º |
| priority | integer | å„ªå…ˆåº¦ | ãƒãƒƒã‚¸è¡¨ç¤º |

#### 5.1.2 user_notificationsãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | ä½¿ç”¨ç®‡æ‰€ |
|---------|-----|------|---------|
| id | integer | é€šçŸ¥ID | URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ |
| user_id | integer | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | æ¨©é™ãƒã‚§ãƒƒã‚¯ |
| notification_template_id | integer | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆID | ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| is_read | boolean | æ—¢èª­ãƒ•ãƒ©ã‚° | æ—¢èª­æ—¥æ™‚ã®è¡¨ç¤ºåˆ¤å®š |
| read_at | timestamp | æ—¢èª­æ—¥æ™‚ | æ—¢èª­æ—¥æ™‚è¡¨ç¤º |
| created_at | timestamp | ä½œæˆæ—¥æ™‚ | ä½œæˆæ—¥æ™‚è¡¨ç¤º |
| related_task_id | integer | é–¢é€£ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯é–¢é€£æƒ…å ±è¡¨ç¤º |

**ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: 
- `user_notifications.notification_template_id` â†’ `notification_templates.id`
- `user_notifications.related_task_id` â†’ `tasks.id`

---

## 6. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 6.1 ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³

| ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥ | åŸå›  | å¯¾å¿œ |
|-----------|------|------|
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ | é€šä¿¡å¤±æ•— | ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º + é€šçŸ¥ä¸€è¦§ã«æˆ»ã‚‹ |
| 401ã‚¨ãƒ©ãƒ¼ | èªè¨¼åˆ‡ã‚Œ | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç† â†’ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢é·ç§» |
| 404ã‚¨ãƒ©ãƒ¼ | é€šçŸ¥ä¸å­˜åœ¨ | ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º + é€šçŸ¥ä¸€è¦§ã«æˆ»ã‚‹ |
| 500ã‚¨ãƒ©ãƒ¼ | ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ | ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º + æŠ€è¡“ã‚µãƒãƒ¼ãƒˆèª˜å° |

### 6.2 ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

| ãƒ†ãƒ¼ãƒ | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
|-------|-----------|
| å­ã©ã‚‚ | ã€ŒãŠã—ã‚‰ã›ãŒã¿ã¤ã‹ã‚‰ãªã‹ã£ãŸã‚ˆï¼ã€ |
| å¤§äºº | ã€Œé€šçŸ¥ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã€ |

### 6.3 404ã‚¨ãƒ©ãƒ¼æ™‚ã®æŒ™å‹•

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
```
1. GET /api/notifications/{id} ã§404ã‚¨ãƒ©ãƒ¼
2. ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’è¨˜éŒ²
3. ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º: ã€Œé€šçŸ¥ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã€
4. é€šçŸ¥ä¸€è¦§ç”»é¢ã«è‡ªå‹•é·ç§»ï¼ˆnavigation.goBack()ï¼‰
```

---

## 7. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

### 7.1 å¿œç­”æ™‚é–“ç›®æ¨™

| é …ç›® | ç›®æ¨™ | æœ€å¤§ |
|------|------|------|
| é€šçŸ¥è©³ç´°å–å¾— | < 200ms | < 500ms |
| ç”»é¢ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° | < 100ms | < 200ms |
| ã‚¿ã‚¹ã‚¯è©³ç´°é·ç§» | < 50ms | < 100ms |

### 7.2 æœ€é©åŒ–æ–½ç­–

1. **ãƒ‡ãƒ¼ã‚¿å–å¾—æœ€é©åŒ–**:
   - é€šçŸ¥è©³ç´°ã¨é–¢é€£ã‚¿ã‚¹ã‚¯ã‚’1å›ã®APIã§å–å¾—ï¼ˆN+1å•é¡Œå›é¿ï¼‰
   
2. **UIæœ€é©åŒ–**:
   - ScrollViewä½¿ç”¨ï¼ˆé•·æ–‡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¯¾å¿œï¼‰
   - ç”»åƒãªã—ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å„ªå…ˆï¼‰

---

## 8. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

### 8.1 èªè¨¼ãƒ»èªå¯

| é …ç›® | è¦ä»¶ | å®Ÿè£…æ–¹æ³• |
|------|------|---------|
| **èªè¨¼** | Sanctumï¼ˆãƒˆãƒ¼ã‚¯ãƒ³èªè¨¼ï¼‰ | `Authorization: Bearer {token}` ãƒ˜ãƒƒãƒ€ãƒ¼ |
| **æ¨©é™ãƒã‚§ãƒƒã‚¯** | é€šçŸ¥æ‰€æœ‰è€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§`user_id`æ¤œè¨¼ |
| **404è¿”å´** | ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é€šçŸ¥ã«ã‚¢ã‚¯ã‚»ã‚¹æ™‚ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§404ã‚¨ãƒ©ãƒ¼ |

### 8.2 ãƒ‡ãƒ¼ã‚¿ä¿è­·

| é …ç›® | è¦ä»¶ | å®Ÿè£…æ–¹æ³• |
|------|------|---------|
| **å€‹äººæƒ…å ±ä¿è­·** | ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é€šçŸ¥ã«ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰404ã‚¨ãƒ©ãƒ¼ |
| **é€šä¿¡æš—å·åŒ–** | HTTPSå¿…é ˆ | API base URL: `https://` |

---

## 9. ãƒ†ã‚¹ãƒˆä»•æ§˜

### 9.1 å˜ä½“ãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `mobile/__tests__/screens/NotificationDetailScreen.test.tsx`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
1. âœ… é€šçŸ¥è©³ç´°ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
2. âœ… ã‚«ãƒ†ã‚´ãƒªãƒãƒƒã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. âœ… å„ªå…ˆåº¦ãƒãƒƒã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
4. âœ… ä½œæˆæ—¥æ™‚ãŒè¡¨ç¤ºã•ã‚Œã‚‹
5. âœ… æ—¢èª­æ—¥æ™‚ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆæ—¢èª­ã®å ´åˆï¼‰
6. âœ… ã‚¿ã‚¹ã‚¯é–¢é€£æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰
7. âœ… ã€Œã‚¿ã‚¹ã‚¯ã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—ã§ã‚¿ã‚¹ã‚¯è©³ç´°ã«é·ç§»ã™ã‚‹
8. âœ… 404ã‚¨ãƒ©ãƒ¼æ™‚ã«é€šçŸ¥ä¸€è¦§ã«æˆ»ã‚‹

### 9.2 çµ±åˆãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `mobile/__tests__/hooks/useNotifications.test.ts`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
1. âœ… é€šçŸ¥è©³ç´°ã‚’å–å¾—ã§ãã‚‹
2. âœ… é–¢é€£ã‚¿ã‚¹ã‚¯æƒ…å ±ã‚’å«ã‚ã¦å–å¾—ã§ãã‚‹
3. âœ… 404ã‚¨ãƒ©ãƒ¼æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒè¿”ã•ã‚Œã‚‹

---

## 10. å®Ÿè£…è©³ç´°

### 10.1 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ‘ã‚¹ | èª¬æ˜ |
|---------|------|------|
| ç”»é¢ | `mobile/src/screens/notifications/NotificationDetailScreen.tsx` | é€šçŸ¥è©³ç´°ç”»é¢ |
| Hook | `mobile/src/hooks/useNotifications.ts` | é€šçŸ¥è©³ç´°å–å¾— |
| Service | `mobile/src/services/notification.service.ts` | é€šçŸ¥APIé€šä¿¡ |
| å‹å®šç¾© | `mobile/src/types/notification.types.ts` | é€šçŸ¥å‹å®šç¾© |
| ãƒ†ã‚¹ãƒˆ | `mobile/__tests__/screens/NotificationDetailScreen.test.tsx` | ç”»é¢ãƒ†ã‚¹ãƒˆ |

### 10.2 ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### 10.2.1 NotificationDetailScreen

```typescript
export default function NotificationDetailScreen({ route, navigation }: any) {
  const { id } = route.params;
  const { fetchNotificationDetail, loading, error } = useNotifications();
  const [notification, setNotification] = useState<Notification | null>(null);
  const [relatedTask, setRelatedTask] = useState<Task | null>(null);
  const { theme } = useTheme();

  useEffect(() => {
    loadNotificationDetail();
  }, [id]);

  const loadNotificationDetail = async () => {
    try {
      const data = await fetchNotificationDetail(id);
      setNotification(data.notification);
      setRelatedTask(data.related_task || null);
    } catch (err: any) {
      if (err?.response?.status === 404) {
        Alert.alert(
          theme === 'child' ? 'ãŠã—ã‚‰ã›ãŒã¿ã¤ã‹ã‚‰ãªã‹ã£ãŸã‚ˆï¼' : 'é€šçŸ¥ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚',
          '',
          [{ text: 'OK', onPress: () => navigation.goBack() }]
        );
      }
    }
  };

  const handleTaskPress = () => {
    if (relatedTask) {
      navigation.navigate('TaskDetail', { id: relatedTask.id });
    }
  };

  if (loading) return <ActivityIndicator />;
  if (!notification) return null;

  return (
    <SafeAreaView>
      <ScrollView>
        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
        <View style={styles.header}>
          <TouchableOpacity onPress={() => navigation.goBack()}>
            <Text style={styles.backButton}>[&lt;]</Text>
          </TouchableOpacity>
          <Text style={styles.title}>
            {theme === 'child' ? 'ãŠã—ã‚‰ã›ã®ãã‚ã—ã„ã“ã¨' : 'é€šçŸ¥è©³ç´°'}
          </Text>
        </View>

        {/* é€šçŸ¥è©³ç´°ã‚«ãƒ¼ãƒ‰ */}
        <View style={styles.card}>
          {/* ã‚«ãƒ†ã‚´ãƒªãƒ»å„ªå…ˆåº¦ãƒãƒƒã‚¸ */}
          <View style={styles.badges}>
            <View style={[styles.categoryBadge, getCategoryStyle(notification.category)]}>
              <Text style={styles.badgeText}>
                {getCategoryLabel(notification.category, theme)}
              </Text>
            </View>
            <View style={[styles.priorityBadge, getPriorityStyle(notification.priority)]}>
              <Text style={styles.badgeText}>
                {getPriorityLabel(notification.priority)}
              </Text>
            </View>
          </View>

          {/* ã‚¿ã‚¤ãƒˆãƒ« */}
          <Text style={styles.notificationTitle}>
            {notification.title}
          </Text>

          {/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
          <Text style={styles.notificationMessage}>
            {notification.message}
          </Text>

          {/* æ—¥æ™‚ */}
          <View style={styles.timestamps}>
            <Text style={styles.timestamp}>
              {theme === 'child' ? 'ã¤ãã£ãŸã¨ã' : 'ä½œæˆ'}: {formatDate(notification.created_at)}
            </Text>
            {notification.read_at && (
              <Text style={styles.timestamp}>
                {theme === 'child' ? 'ã‚ˆã‚“ã ã¨ã' : 'æ—¢èª­'}: {formatDate(notification.read_at)}
              </Text>
            )}
          </View>
        </View>

        {/* ã‚¿ã‚¹ã‚¯é–¢é€£æƒ…å ± */}
        {relatedTask && (
          <View style={styles.relatedTaskSection}>
            <Text style={styles.sectionTitle}>
              {theme === 'child' ? 'ã‹ã‚“ã‚Œã‚“ã™ã‚‹ã‚„ã‚‹ã“ã¨' : 'é–¢é€£ã‚¿ã‚¹ã‚¯'}
            </Text>
            <Text style={styles.taskTitle}>{relatedTask.title}</Text>
            <TouchableOpacity
              style={styles.taskButton}
              onPress={handleTaskPress}
            >
              <Text style={styles.taskButtonText}>
                {theme === 'child' ? 'ã‚„ã‚‹ã“ã¨ã‚’ã¿ã‚‹' : 'ã‚¿ã‚¹ã‚¯ã‚’è¦‹ã‚‹'}
              </Text>
            </TouchableOpacity>
          </View>
        )}
      </ScrollView>
    </SafeAreaView>
  );
}
```

#### 10.2.2 useNotifications Hookï¼ˆè©³ç´°å–å¾—ï¼‰

```typescript
export function useNotifications() {
  // ... (ä»–ã®æ©Ÿèƒ½)

  const fetchNotificationDetail = async (id: number) => {
    try {
      const response = await notificationService.getNotificationDetail(id);
      return response.data;
    } catch (err: any) {
      if (err?.response?.status === 404) {
        throw new Error('é€šçŸ¥ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚');
      }
      throw err;
    }
  };

  return {
    // ... (ä»–ã®æ©Ÿèƒ½)
    fetchNotificationDetail,
  };
}
```

#### 10.2.3 notification.service.tsï¼ˆè©³ç´°å–å¾—ï¼‰

```typescript
export const notificationService = {
  // ... (ä»–ã®æ©Ÿèƒ½)

  async getNotificationDetail(id: number) {
    return api.get<{notification: Notification; related_task: Task | null}>(`/notifications/${id}`);
  },
};
```

---

## 11. ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

### 11.1 Phase 2.B-7.5: Pushé€šçŸ¥å®Ÿè£…

**å®Ÿè£…å†…å®¹**:
- Pushé€šçŸ¥ã‚¿ãƒƒãƒ—æ™‚ã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ï¼ˆé€šçŸ¥è©³ç´°ç”»é¢ã«ç›´æ¥é·ç§»ï¼‰

### 11.2 å°†æ¥çš„ãªæ©Ÿèƒ½æ‹¡å¼µ

- é€šçŸ¥ã®å‰Šé™¤æ©Ÿèƒ½
- é€šçŸ¥ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ©Ÿèƒ½
- é€šçŸ¥ã®å…±æœ‰æ©Ÿèƒ½

---

## 12. å‚è€ƒè³‡æ–™

### 12.1 é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | ãƒ‘ã‚¹ |
|------------|------|
| é€šçŸ¥æ©Ÿèƒ½è¦ä»¶å®šç¾© | `definitions/Notification.md` |
| é€šçŸ¥ä¸€è¦§ç”»é¢è¦ä»¶å®šç¾© | `definitions/mobile/NotificationListScreen.md` |
| ãƒ¢ãƒã‚¤ãƒ«é–‹ç™ºè¦å‰‡ | `docs/mobile/mobile-rules.md` |
| å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ | `docs/reports/mobile/2025-12-07-phase2-b5-step2-notification-completion-report.md` |
| å®Ÿè£…è¨ˆç”» | `docs/plans/phase2-mobile-app-implementation-plan.md` |

### 12.2 Webç‰ˆå¯¾å¿œç”»é¢

| Webç”»é¢ | ãƒ‘ã‚¹ |
|--------|------|
| é€šçŸ¥è©³ç´° | `resources/views/notifications/show.blade.php` |

---

**ä½œæˆæ—¥**: 2025-12-07  
**ä½œæˆè€…**: GitHub Copilot  
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: æœªå®Ÿæ–½  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
